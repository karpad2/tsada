import{u as b,g as v,D as k,b as _,d as a,I as D,S,Q as m,e as y,y as N,_ as F,r as L,c as g,a as n,t as x,F as T,f as V,k as B,o as p,i as C,w as q}from"./index-BfJHO_zn.js";const E={name:"Workers",components:{},setup(){},mounted(){const r=b();this.admin=r.userLoggedin,document.title=this.$t("teachers_receiving_hour"),v.fromTo("#render_title",{opacity:0,x:"50%"},{duration:1.5,opacity:1,x:0}),this.admin?this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("p_receiving_hour"),align:"start",key:"p_receiving_hour",width:"300px"},{title:this.$t("u_receiving_hour"),align:"start",key:"u_receiving_hour",width:"300px"}]:this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("p_receiving_hour"),align:"start",key:"p_receiving_hour",width:"300px"},{title:this.$t("u_receiving_hour"),align:"start",key:"u_receiving_hour",width:"300px"}],this.load_workers_base(),this.admin?this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"receiving_hour",headerName:this.$t("receiving_hour"),sortable:!0,filter:!0},{field:"edit",headerName:this.$t("edit"),sortable:!0,filter:!0}]:this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"receiving_hour",headerName:this.$t("receiving_hour"),sortable:!0,filter:!0}],v.fromTo(".popups",{opacity:0,y:"50%"},{duration:1.5,opacity:1,y:0})},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],roles:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async new_stuff(r){const l=await new k(_).createDocument(a.website_db,a.workers,D.unique(),{roles:r});this.$router.push("/admin/worker/"+l.$id)},async load_workers_base(){const r=b();this.workers=[],this.roles=[];const o=new k(_),l=new S(_);let i=r.language,f=l.getFileView(a.website_images,a.missing_worker_picture).href,c=await o.listDocuments(a.website_db,a.roles_db,[m.orderAsc("listasorrend"),m.equal("has_receiving_hour",!0)]);for(let u=0;u<c.documents.length;u++){let s=c.documents[u],w=[],$=await o.listDocuments(a.website_db,a.workers,[m.equal("roles",[s.$id])]),d="";i=="en"?d=s.role_en:i=="hu"?d=s.role_hu:(i=="rs"||i=="sr")&&(d=y(s.role_rs)),await $.documents.forEach(async e=>{let t={name:"",contact:"",img:"",id:"",p_receiving_hour:"",u_receiving_hour:""};t.id=e.$id,e.p_receiving_hour!=""||e.p_receiving_hour!=null?t.p_receiving_hour=e.p_receiving_hour:t.p_receiving_hour="---",e.u_receiving_hour!=""||e.u_receiving_hour!=null?t.u_receiving_hour=e.u_receiving_hour:t.u_receiving_hour="---",i=="en"||i=="hu"?(t.name=e.worker_name_hu,t.contact=e.contact):(i=="rs"||i=="sr")&&(t.name=y(e.worker_name_rs),t.contact=e.contact),e.worker_img==""||e.worker_img==null?t.img=f:t.img=await l.getFileView(a.website_images,e.worker_img).href,w.push(t)});let h={role:"",workers:[],id:""};h.id=s.$id,h.role=d,h.workers=w,this.roles.push(h)}N(this.roles),this.loaded=!0},onReady(r){}}},I={class:"text-gray-600 min-h-screen"},W={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},Q={class:"flex flex-wrap w-full mb-20"},A={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},R={id:"render_title",class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},U={class:"sm:text-2xl text-sm font-medium mb-3 text-gray-900 dark:text-white"};function j(r,o,l,i,f,c){const u=L("v-data-table");return p(),g("section",I,[n("div",W,[n("div",Q,[n("div",A,[n("h1",R,x(r.$t("teachers_receiving_hour")),1),o[0]||(o[0]=n("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1))])]),r.loaded?(p(!0),g(T,{key:0},V(r.roles,s=>(p(),g("div",{class:"m-auto w-full popups",key:s.role},[n("h1",U,x(s.role),1),C(u,{height:"400",headers:r.headers,items:s.workers},{bottom:q(()=>o[1]||(o[1]=[])),_:2},1032,["headers","items"])]))),128)):B("",!0)])])}const G=F(E,[["render",j]]);export{G as default};
