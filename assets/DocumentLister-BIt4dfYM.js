import{u,D as g,b as c,d as l,I as v,S,Q as b,_ as L,r as _,c as w,a as i,t as h,i as f,w as n,h as N,k,o as p,j as y}from"./index-DhOGi77i.js";import{m}from"./moment-with-locales-DReu36dl.js";const C={name:"Workers",components:{},setup(){},mounted(){const t=u();this.admin=t.userLoggedin,this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("open_document"),align:"start",key:"open",width:"300px"}],this.load_documents_base(),this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("date"),sortable:!0,filter:!0},{field:"open",headerName:this.$t("open_message"),sortable:!0,filter:!0}],this.admin&&(this.headers.push({title:this.$t("edit_document"),align:"start",key:"edit",width:"300px"}),this.colDefs.push({field:"edit",headerName:this.$t("edit_message"),sortable:!0,filter:!0}))},data:()=>({_title:"",workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],documents:[],loaded:!1,headers:[],colDefs:[],admin:!1}),methods:{rt_time(t){let o=u().language;return o=="rs"||o=="sr"?m.locale("sr"):o=="hu"?m.locale("hu"):o=="en"&&m.locale("en"),m(t).format("LLL")},async new_stuff(){const e=await new g(c).createDocument(l.website_db,l.documents_db,v.unique(),{documentCategories:this.$route.params.id});this.$router.push("/admin/document/"+e.$id)},async load_documents_base(){let e=u().language;this.workers=[],this.roles=[];const o=new g(c);new S(c);let r=await o.getDocument(l.website_db,l.document_categories_db,this.$route.params.id);e=="rs"||e=="sr"?this._title=r.category_name_rs:e=="hu"?this._title=r.category_name_hu:e=="en"&&(this._title=r.category_name_en),await(await o.listDocuments(l.website_db,l.documents_db,[b.equal("documentCategories",this.$route.params.id),b.orderDesc("$createdAt")])).documents.forEach(async a=>{let s={name:"",date:"",id:"",doc_id:""};e=="rs"||e=="sr"?s.name=a.document_title_rs:e=="hu"?s.name=a.document_title_hu:e=="en"&&(s.name=a.document_title_en),s.id=a.$id,s.doc_id=a.document_id,s.date=a.$createdAt,this.documents.push(s)}),console.log(this.messages),this.loaded=!0}},calculated:{}},B={class:"text-gray-600 min-h-screen"},V={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},E={class:"flex flex-wrap w-full mb-20"},I={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},T={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},q={key:0,class:"m-auto w-full"};function z(t,e,o,r,$,a){const s=_("router-link"),x=_("v-data-table"),D=_("v-btn");return p(),w("section",B,[i("div",V,[i("div",E,[i("div",I,[i("h1",T,h(t._title),1),e[1]||(e[1]=i("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1))])]),t.loaded?(p(),w("div",q,[f(x,{height:"400",headers:t.headers,items:t.documents,"items-per-page":-1},{"item.date":n(({item:d})=>[y(h(a.rt_time(d.date)),1)]),"item.open":n(({item:d})=>[f(s,{to:"/document/"+d.doc_id},{default:n(()=>e[2]||(e[2]=[i("i",{class:"pi pi-book icon_size"},null,-1)])),_:2},1032,["to"])]),"item.edit":n(({item:d})=>[f(s,{to:"/admin/document/"+d.id},{default:n(()=>e[3]||(e[3]=[i("i",{class:"pi pi-cloud-upload icon_size"},null,-1)])),_:2},1032,["to"])]),bottom:n(()=>e[4]||(e[4]=[])),_:1},8,["headers","items"]),t.admin?(p(),N(D,{key:0,onClick:e[0]||(e[0]=d=>a.new_stuff()),class:"m-5"},{default:n(()=>[y(h(t.$t("add_new_document_in_that_category")),1)]),_:1})):k("",!0)])):k("",!0)])])}const j=L(C,[["render",z]]);export{j as default};
