import{u as x,D as y,b as w,d as r,I as j,S as R,Q as v,e as N,_ as V,r as k,c as b,a as n,t as p,F as B,f as C,g as D,o as g,h as S,w as h,i as F,j as L}from"./index-VDzj_Zsj.js";const E={name:"Workers",components:{},setup(){},mounted(){const e=x();this.admin=e.userLoggedin,this.admin?this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("contactus"),align:"start",key:"contact",width:"300px"},{title:this.$t("photo"),align:"start",key:"img",width:"200px",cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}},{title:this.$t("Edit"),align:"start",key:"edit",width:"300px"}]:this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("contactus"),align:"start",key:"contact",width:"300px"},{title:this.$t("photo"),align:"start",key:"img",cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}}],this.load_workers_base(),this.admin?this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("contact"),sortable:!0,filter:!0},{field:"img",headerName:this.$t("image"),cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}},{field:"edit",headerName:this.$t("edit"),sortable:!0,filter:!0}]:this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("contact"),sortable:!0,filter:!0},{field:"img",headerName:this.$t("image"),cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}}]},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],roles:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async new_stuff(e){const d=await new y(w).createDocument(r.website_db,r.workers,j.unique(),{roles:e});this.$router.push("/admin/worker/"+d.$id)},async load_workers_base(){const e=x();this.workers=[],this.roles=[];const t=new y(w),d=new R(w);let s=e.language,$=d.getFileView(r.website_images,r.missing_worker_picture).href,u=await t.listDocuments(r.website_db,r.roles_db,[v.orderAsc("listasorrend")]);for(let m=0;m<u.documents.length;m++){let l=u.documents[m],_=[],c=await t.listDocuments(r.website_db,r.workers,[v.equal("roles",[l.$id])]),a="";s=="en"?a=l.role_en:s=="hu"?a=l.role_hu:(s=="rs"||s=="sr")&&(a=N(l.role_rs)),await c.documents.forEach(async i=>{let o={name:"",contact:"",img:"",id:""};o.id=i.$id,s=="en"||s=="hu"?(o.name=i.worker_name_hu,o.contact=i.contact):(s=="rs"||s=="sr")&&(o.name=N(i.worker_name_rs),o.contact=i.contact),i.worker_img==""||i.worker_img==null?o.img=$:o.img=await d.getFileView(r.website_images,i.worker_img).href,_.push(o)});let f={role:"",workers:[],id:""};f.id=l.$id,f.role=a,f.workers=_,this.roles.push(f)}console.log(this.roles),this.loaded=!0},onReady(e){console.log("onReady")}}},I={class:"text-gray-600"},T={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},q={class:"flex flex-wrap w-full mb-20"},Q={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},W={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},A=n("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),U={class:"sm:text-2xl text-sm font-medium mb-3 text-gray-900 dark:text-white"},z=["src"],G=n("i",{class:"pi pi-user-edit text-5xl"},null,-1);function H(e,t,d,s,$,u){const m=k("router-link"),l=k("v-data-table"),_=k("v-btn");return g(),b("section",I,[n("div",T,[n("div",q,[n("div",Q,[n("h1",W,p(e.$t("workers")),1),A])]),e.loaded?(g(!0),b(B,{key:0},C(e.roles,c=>(g(),b("div",{class:"m-auto w-full",key:c.role},[n("h1",U,p(c.role),1),S(l,{height:"400",headers:e.headers,items:c.workers},{"item.img":h(({item:a})=>[n("img",{src:a.img,class:"object-cover w-20"},null,8,z)]),"item.edit":h(({item:a})=>[S(m,{to:"/admin/worker/"+a.id},{default:h(()=>[G]),_:2},1032,["to"])]),bottom:h(()=>[]),_:2},1032,["headers","items"]),e.admin?(g(),F(_,{key:0,onClick:a=>u.new_stuff(c.id),class:"m-5"},{default:h(()=>[L(p(e.$t("add_new_worker_in_that_category")),1)]),_:2},1032,["onClick"])):D("",!0)]))),128)):D("",!0)])])}const K=V(E,[["render",H]]);export{K as default};
