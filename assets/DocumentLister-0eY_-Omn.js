import{u as c,D as g,b as m,d as l,I as D,S,Q as b,_ as L,r as u,c as w,a as d,t as h,i as _,w as i,j as N,h as k,o as f,k as $}from"./index-mvDuRNEt.js";import{m as r}from"./moment-with-locales-UHKzelJq.js";const C={name:"Workers",components:{},setup(){},mounted(){const e=c();this.admin=e.userLoggedin,this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("open_document"),align:"start",key:"open",width:"300px"}],this.load_documents_base(),this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("date"),sortable:!0,filter:!0},{field:"open",headerName:this.$t("open_message"),sortable:!0,filter:!0}],this.admin&&(this.headers.push({title:this.$t("edit_document"),align:"start",key:"edit",width:"300px"}),this.colDefs.push({field:"edit",headerName:this.$t("edit_message"),sortable:!0,filter:!0}))},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],documents:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async new_stuff(){const t=await new g(m).createDocument(l.website_db,l.documents_db,D.unique(),{documentCategories:this.$route.params.category});this.$router.push("/admin/document/"+t.$id)},async load_documents_base(){let t=c().language;this.workers=[],this.roles=[];const a=new g(m);new S(m),await(await a.listDocuments(l.website_db,l.documents_db,[b.equal("documentCategories",this.$route.params.category),b.orderDesc("$createdAt")])).documents.forEach(async o=>{let s={name:"",date:"",id:"",doc_id:""};t=="rs"||t=="sr"?s.name=o.document_title_rs:t=="hu"?s.name=o.document_title_hu:t=="en"&&(s.name=o.document_title_en),s.id=o.$id,s.doc_id=o.document_id,s.date=o.$createdAt,this.documents.push(s)}),console.log(this.messages),this.loaded=!0},rt_time(e){let a=c().language;return a=="rs"||a=="sr"?r.locale("sr"):a=="hu"?r.locale("hu"):a=="en"&&r.locale("en"),r(e).format("LLL")}},calculated:{}},B={class:"text-gray-600 h-screen"},V={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},E={class:"flex flex-wrap w-full mb-20"},I={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},T={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},q=d("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),A={key:0,class:"m-auto w-full"},Q=d("i",{class:"pi pi-book text-5xl"},null,-1),j=d("i",{class:"pi pi-cloud-upload text-5xl"},null,-1);function F(e,t,a,x,o,s){const p=u("router-link"),y=u("v-data-table"),v=u("v-btn");return f(),w("section",B,[d("div",V,[d("div",E,[d("div",I,[d("h1",T,h(e.$t("documents")),1),q])]),e.loaded?(f(),w("div",A,[_(y,{height:"400",headers:e.headers,items:e.documents},{"item.date":i(({item:n})=>[$(h(s.rt_time(n.date)),1)]),"item.open":i(({item:n})=>[_(p,{to:"/document/"+n.doc_id},{default:i(()=>[Q]),_:2},1032,["to"])]),"item.edit":i(({item:n})=>[_(p,{to:"/admin/document/"+n.id},{default:i(()=>[j]),_:2},1032,["to"])]),bottom:i(()=>[]),_:1},8,["headers","items"]),e.admin?(f(),N(v,{key:0,onClick:t[0]||(t[0]=n=>s.new_stuff()),class:"m-5"},{default:i(()=>[$(h(e.$t("add_new_document_in_that_category")),1)]),_:1})):k("",!0)])):k("",!0)])])}const z=L(C,[["render",F]]);export{z as default};
