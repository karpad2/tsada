import{_ as T,D as g,b as _,S as A,d as o,x as y,I as V,r as f,c as S,a as r,t as b,i,k as U,w as l,o as E,j as u,y as F,z as L}from"./index-gJPdk6Gh.js";const Y={data(){return{slides:[],currentSlideId:null,title:"",content:"",fileLink:null,img:"",imageId:"",slideHeaders:[{text:"Title",align:"start",value:"title"},{text:"Created At",align:"start",value:"createdAt"},{text:"Actions",align:"end",value:"actions",sortable:!1}],events:[],currentEventId:null,eventTitle:"",eventDescription:"",eventDate:"",eventFileLink:null,eventImg:"",eventImageId:"",eventHeaders:[{text:"Title",align:"start",value:"title"},{text:"Date",align:"start",value:"date"},{text:"Actions",align:"end",value:"actions",sortable:!1}]}},mounted(){this.fetchContent()},methods:{async fetchContent(){const t=new g(_),e=new A(_);try{const n=await t.listDocuments(o.website_db,o.tv_slides);this.slides=[],this.events=[];for(const a of n.documents){const s=a.image?e.getFileView(o.website_images,a.image).toString():null;a.type==="slide"?this.slides.push({id:a.$id,title:a.title,createdAt:y(a.$createdAt).format("YYYY-MM-DD"),sorrend:parseInt(a.sorrend),image:s}):a.type==="event"&&this.events.push({id:a.$id,title:a.title,date:y(a.event_date).format("YYYY-MM-DD"),description:a.description,image:s})}this.slides.sort((a,s)=>a.sorrend-s.sorrend)}catch(n){console.error("Error fetching content:",n)}},editSlide(t){const e=this.slides.find(n=>n.id===t);e&&(this.currentSlideId=t,this.title=e.title,this.content=e.text,this.img=e.image,this.imageId=e.imageId)},async saveSlide(){const t=new g(_),e={type:"slide",title:this.title,text:this.content,image:this.imageId,sorrend:this.slides.length.toString()};try{let n;this.currentSlideId===null?n=(await t.createDocument(o.website_db,o.tv_slides,V.unique(),e)).$id:(await t.updateDocument(o.website_db,o.tv_slides,this.currentSlideId,e),n=this.currentSlideId),this.currentSlideId=n,this.fetchContent(),this.resetSlideForm()}catch(n){console.error("Error saving slide:",n)}},resetSlideForm(){this.currentSlideId=null,this.title="",this.content="",this.fileLink=null,this.img="",this.imageId=""},async removeSlide(t){const e=new g(_);try{await e.deleteDocument(o.website_db,o.tv_slides,t),this.fetchContent()}catch(n){console.error("Error deleting slide:",n)}},moveSlideUp(t){if(t>0){const e=this.slides[t-1];this.slides[t-1]=this.slides[t],this.slides[t]=e,this.updateSlideOrder()}},moveSlideDown(t){if(t<this.slides.length-1){const e=this.slides[t+1];this.slides[t+1]=this.slides[t],this.slides[t]=e,this.updateSlideOrder()}},async updateSlideOrder(){const t=new g(_);this.slides.forEach(async(e,n)=>{e.sorrend=n.toString(),await t.updateDocument(o.website_db,o.tv_slides,e.id,{sorrend:e.sorrend})})},editEvent(t){const e=this.events.find(n=>n.id===t);e&&(this.currentEventId=t,this.eventTitle=e.title,this.eventDescription=e.description,this.eventDate=e.date,this.eventImg=e.image,this.eventImageId=e.imageId)},async saveEvent(){const t=new g(_),e={type:"event",title:this.eventTitle,description:this.eventDescription,event_date:this.eventDate,image:this.eventImageId};try{let n;this.currentEventId===null?n=(await t.createDocument(o.website_db,o.tv_slides,V.unique(),e)).$id:(await t.updateDocument(o.website_db,o.tv_slides,this.currentEventId,e),n=this.currentEventId),this.currentEventId=n,this.fetchContent(),this.resetEventForm()}catch(n){console.error("Error saving event:",n)}},resetEventForm(){this.currentEventId=null,this.eventTitle="",this.eventDescription="",this.eventDate="",this.eventFileLink=null,this.eventImg="",this.eventImageId=""},async removeEvent(t){const e=new g(_);try{await e.deleteDocument(o.website_db,o.tv_slides,t),this.fetchContent()}catch(n){console.error("Error deleting event:",n)}},moveEventUp(t){if(t>0){const e=this.events[t-1];this.events[t-1]=this.events[t],this.events[t]=e,this.updateEventOrder()}},moveEventDown(t){if(t<this.events.length-1){const e=this.events[t+1];this.events[t+1]=this.events[t],this.events[t]=e,this.updateEventOrder()}},async updateEventOrder(){const t=new g(_);this.events.forEach(async(e,n)=>{e.sorrend=n.toString(),await t.updateDocument(o.website_db,o.tv_slides,e.id,{sorrend:e.sorrend})})}}},w=t=>(F("data-v-c7b3bad5"),t=t(),L(),t),N={class:"container mx-auto py-8"},O={class:"mb-12 p-6 bg-gray-100 rounded-lg shadow-md"},x={class:"text-2xl font-bold mb-4"},H={key:0,class:"my-4"},M=w(()=>r("span",null,"Preview:",-1)),B=["src"],q=w(()=>r("h2",{class:"text-2xl font-bold mb-4"},"Slides",-1)),P={class:"flex space-x-2"},j={class:"mt-12 p-6 bg-gray-100 rounded-lg shadow-md"},z={class:"text-2xl font-bold mb-4"},R={key:0,class:"my-4"},G=w(()=>r("span",null,"Preview:",-1)),J=["src"],K=w(()=>r("h2",{class:"text-2xl font-bold mb-4"},"Recent Events",-1)),Q={class:"flex space-x-2"};function W(t,e,n,a,s,c){const I=f("v-text-field"),D=f("ckeditor"),k=f("v-file-input"),v=f("v-btn"),h=f("v-icon"),C=f("v-data-table");return E(),S("div",N,[r("section",O,[r("h2",x,b(s.currentSlideId?"Edit Slide":"Add New Slide"),1),i(I,{modelValue:s.title,"onUpdate:modelValue":e[0]||(e[0]=d=>s.title=d),label:"Slide Title",counter:"100","hide-details":""},null,8,["modelValue"]),i(D,{modelValue:s.content,"onUpdate:modelValue":e[1]||(e[1]=d=>s.content=d)},null,8,["modelValue"]),i(k,{onChange:t.fileUpload,modelValue:s.fileLink,"onUpdate:modelValue":e[2]||(e[2]=d=>s.fileLink=d),accept:"image/*",label:"Slide Image Upload"},null,8,["onChange","modelValue"]),s.img?(E(),S("div",H,[M,r("img",{class:"h-40 w-auto rounded",src:s.img,alt:"Slide Image"},null,8,B)])):U("",!0),i(v,{onClick:c.saveSlide,class:"mt-5"},{default:l(()=>[u(b(s.currentSlideId?"Save Changes":"Add Slide"),1)]),_:1},8,["onClick"])]),r("section",null,[q,i(C,{items:s.slides,headers:s.slideHeaders},{"item.actions":l(({item:d,index:m})=>[r("div",P,[i(v,{onClick:p=>c.editSlide(d.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.removeSlide(d.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-delete")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.moveSlideUp(m),icon:"",disabled:m===0},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-up")]),_:1})]),_:2},1032,["onClick","disabled"]),i(v,{onClick:p=>c.moveSlideDown(m),icon:"",disabled:m===s.slides.length-1},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-down")]),_:1})]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","headers"])]),r("section",j,[r("h2",z,b(s.currentEventId?"Edit Event":"Add New Event"),1),i(I,{modelValue:s.eventTitle,"onUpdate:modelValue":e[3]||(e[3]=d=>s.eventTitle=d),label:"Event Title",counter:"100","hide-details":""},null,8,["modelValue"]),i(I,{modelValue:s.eventDate,"onUpdate:modelValue":e[4]||(e[4]=d=>s.eventDate=d),label:"Event Date",type:"date","hide-details":""},null,8,["modelValue"]),i(D,{modelValue:s.eventDescription,"onUpdate:modelValue":e[5]||(e[5]=d=>s.eventDescription=d)},null,8,["modelValue"]),i(k,{onChange:t.eventFileUpload,modelValue:s.eventFileLink,"onUpdate:modelValue":e[6]||(e[6]=d=>s.eventFileLink=d),accept:"image/*",label:"Event Image Upload"},null,8,["onChange","modelValue"]),s.eventImg?(E(),S("div",R,[G,r("img",{class:"h-40 w-auto rounded",src:s.eventImg,alt:"Event Image"},null,8,J)])):U("",!0),i(v,{onClick:c.saveEvent,class:"mt-5"},{default:l(()=>[u(b(s.currentEventId?"Save Changes":"Add Event"),1)]),_:1},8,["onClick"])]),r("section",null,[K,i(C,{items:s.events,headers:s.eventHeaders},{"item.actions":l(({item:d,index:m})=>[r("div",Q,[i(v,{onClick:p=>c.editEvent(d.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.removeEvent(d.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-delete")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.moveEventUp(m),icon:"",disabled:m===0},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-up")]),_:1})]),_:2},1032,["onClick","disabled"]),i(v,{onClick:p=>c.moveEventDown(m),icon:"",disabled:m===s.events.length-1},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-down")]),_:1})]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","headers"])])])}const Z=T(Y,[["render",W],["__scopeId","data-v-c7b3bad5"]]);export{Z as default};
