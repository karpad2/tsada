import{D as p,b as _,d as m,u as b,_ as V,r as d,c as k,a as i,i as l,w as u,o as w,t as v,j as C}from"./index-C4MzQahp.js";const x={data(){return{name:"",email:"",phone:"",score:"",which_class:"",location:"",mark:null,motivation_letter:0,positive_document:0,video_link:""}},methods:{async save(){const a=new p(_);try{const e=await a.updateDocument(m.website_db,m.erasmus_applies,this.$route.params.id,{name:this.name,phone:this.phone,email:this.email,class:this.which_class,erasmusLocation:this.location,mark:this.mark,motivation_letter:this.motivation_letter,positive_document:this.positive_document,score:this.score});this.$notify(this.$t("apply_saved")),console.log("Save successful:",e)}catch(e){console.error("Error saving data:",e),this.$notify({type:"error",text:this.$t("error_saving")})}},calculateScore(){if(this.motivation_letter==null)return;const a=parseFloat(this.mark),e=parseFloat(this.motivation_letter),c=parseFloat(this.positive_document),r=this.which_class.trim().toUpperCase();let t=1;r.includes("IV")?t=1.2:r.includes("III")?t=1.1:r.includes("II")&&(t=1);const s=a*t*20*.5+e*2+c*2;this.score=s.toFixed(2),this.save()},async getData(){const a=new p(_);b();let e=await a.getDocument(m.website_db,m.erasmus_applies,this.$route.params.id);this.name=e.name,this.phone=e.phone,this.email=e.email,this.mark=e.mark,this.score=e.score,this.which_class=e.class,e.erasmusLocation&&(this.location=e.erasmusLocation.$id),console.log("Form data loaded:",e)}},mounted(){this.getData()}},y={class:"text-gray-600"},S={class:"container px-5 mx-auto backdrop-filter bg-opacity-50 dark:bg-slate-500/50 bg-gray-100 backdrop-blur-lg",style:{"min-height":"70vh"}},D={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},U={id:"render_title",class:"sm:text-3xl p-3 text-2xl font-medium title-font mb-2 text-gray-100"},q=i("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),E={class:"pb-2 w-full dark:text-white"};function I(a,e,c,r,t,n){const h=d("video-background"),s=d("v-text-field"),g=d("v-btn"),f=d("v-form");return w(),k("section",y,[i("div",S,[l(h,{src:t.video_link,style:{"min-height":"200px"},class:"flex flex-wrap w-full mb-20 p-2 rounded",overlay:"linear-gradient(45deg,#2a4ae430,#0EA5E950)"},{default:u(()=>[i("div",D,[i("h1",U,v(a.$t("erasmus_apply")),1),q])]),_:1},8,["src"]),i("div",E,[l(f,{ref:"form"},{default:u(()=>[l(s,{required:"",onChange:n.save,modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),label:"Name"},null,8,["onChange","modelValue"]),l(s,{required:"",onChange:n.save,modelValue:t.phone,"onUpdate:modelValue":e[1]||(e[1]=o=>t.phone=o),label:"Phone"},null,8,["onChange","modelValue"]),l(s,{required:"",onChange:n.save,modelValue:t.email,"onUpdate:modelValue":e[2]||(e[2]=o=>t.email=o),label:"Email"},null,8,["onChange","modelValue"]),l(s,{required:"",onChange:n.save,modelValue:t.mark,"onUpdate:modelValue":e[3]||(e[3]=o=>t.mark=o),label:"Mark"},null,8,["onChange","modelValue"]),l(s,{required:"",onChange:n.calculateScore,modelValue:t.motivation_letter,"onUpdate:modelValue":e[4]||(e[4]=o=>t.motivation_letter=o),label:"Motivational Letter Score (out of 10)"},null,8,["onChange","modelValue"]),l(s,{required:"",onChange:n.calculateScore,modelValue:t.positive_document,"onUpdate:modelValue":e[5]||(e[5]=o=>t.positive_document=o),label:"Positive Document Score (out of 10)"},null,8,["onChange","modelValue"]),l(s,{required:"",modelValue:t.which_class,"onUpdate:modelValue":e[6]||(e[6]=o=>t.which_class=o),label:"Class (e.g., IV-1)"},null,8,["modelValue"]),l(s,{modelValue:t.score,"onUpdate:modelValue":e[7]||(e[7]=o=>t.score=o),label:"Calculated Score",readonly:""},null,8,["modelValue"]),l(g,{onClick:n.save},{default:u(()=>[C(v(a.$t("submit")),1)]),_:1},8,["onClick"])]),_:1},512)])])])}const M=V(x,[["render",I]]);export{M as default};
