import{u as g,D as k,b as n,S as w,d as l,Q as N,_ as D,r as m,c as b,a as o,t as c,i as h,w as i,h as _,o as u,k as x,j as B}from"./index-CZnG6tjm.js";import{m as $}from"./moment-with-locales-OC4L4a83.js";const L={name:"Workers",components:{},setup(){},mounted(){const t=g();this.admin=t.userLoggedin,this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("email"),align:"start",key:"email",width:"300px"},{title:this.$t("phone"),align:"start",key:"phone",width:"300px"},{title:this.$t("class"),align:"start",key:"class",width:"300px"},{title:this.$t("mark_avg"),align:"start",key:"mark",width:"300px"},{title:this.$t("motivation_letter"),align:"start",key:"edit1",width:"300px"},{title:this.$t("other_positive_documents"),align:"start",key:"edit2",width:"300px"},{title:this.$t("delete"),align:"start",key:"edit3",width:"300px"}],this.load_messages_base(),this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("date"),sortable:!0,filter:!0},{field:"email",headerName:this.$t("email"),sortable:!0,filter:!0},{field:"phone",headerName:this.$t("phone"),sortable:!0,filter:!0},{field:"class",headerName:this.$t("class"),sortable:!0,filter:!0},{field:"mark",headerName:this.$t("mark"),sortable:!0,filter:!0},{field:"edit1",headerName:this.$t("motivation_letter"),sortable:!0,filter:!0},{field:"edit2",headerName:this.$t("other_positive_documents"),sortable:!0,filter:!0}]},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],messages:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async load_messages_base(){const t=g();this.workers=[],this.roles=[];const r=new k(n);new w(n),t.language,await(await r.listDocuments(l.website_db,l.erasmus_applies,[N.orderDesc("$createdAt")])).documents.forEach(async a=>{let e={name:"",class:"",contact:"",email:"",date:"",id:"",phone:"",mark:"",motivation_letter:"",other_document:""};e.id=a.$id,e.date=a.$createdAt,e.name=a.name,e.phone=a.phone,e.email=a.email,e.mark=a.mark,e.class=a.class,e.motivation_letter=a.link_motivation_letter,e.other_document=a.link_other_document,this.messages.push(e)}),console.log(this.messages),this.loaded=!0},async delete_content(t,r){const d=new k(n),a=new w(n);try{let e=await a.deleteFile(l.fs_erasmus,r)}catch(e){console.warn(e)}try{let e=await d.deleteDocument(l.website_db,l.erasmus_applies,t)}catch(e){console.warn(e)}this.$notify(this.$t("deleted")),this.load_messages_base()},rt_time(t){return $.locale("hu"),$(t).format("LLL")}},calculated:{}},S={class:"text-gray-600"},C={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},E={class:"flex flex-wrap w-full mb-20"},V={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},A={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},T=o("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),F={key:0,class:"m-auto w-full"},Q=o("i",{class:"pi pi-envelope text-5xl"},null,-1),j=o("i",{class:"pi pi-envelope text-5xl"},null,-1);function I(t,r,d,a,e,p){const f=m("router-link"),v=m("v-btn"),y=m("v-data-table");return u(),b("section",S,[o("div",C,[o("div",E,[o("div",V,[o("h1",A,c(t.$t("erasmus_applies")),1),T])]),t.loaded?(u(),b("div",F,[h(y,{height:"400",headers:t.headers,items:t.messages},{"item.date":i(({item:s})=>[x(c(p.rt_time(s.date)),1)]),"item.edit1":i(({item:s})=>[h(f,{to:"/admin/erasmus/docviewer/"+s.motivation_letter},{default:i(()=>[Q]),_:2},1032,["to"])]),"item.edit2":i(({item:s})=>[s.other_document!=null?(u(),B(f,{key:0,to:"/admin/erasmus/docviewer/"+s.other_document},{default:i(()=>[j]),_:2},1032,["to"])):_("",!0)]),"item.edit3":i(({item:s})=>[_("",!0),h(v,{onClick:U=>p.delete_content(s.id,s.other_document)},{default:i(()=>[x(c(t.$t("delete")),1)]),_:2},1032,["onClick"])]),bottom:i(()=>[]),_:1},8,["headers","items"])])):_("",!0)])])}const z=D(L,[["render",I]]);export{z as default};
