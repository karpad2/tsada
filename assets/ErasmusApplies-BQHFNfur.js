import{u as w,D as x,b as r,S as $,d as l,Q as b,_ as C,r as u,c as y,a as o,t as n,i as d,w as i,k as m,o as p,j as f,h as D}from"./index-CExocia-.js";import{m as v}from"./moment-with-locales-LhJZLGdy.js";const S={name:"Workers",components:{},setup(){},mounted(){const t=w();this.admin=t.userLoggedin,this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("email"),align:"start",key:"email",width:"300px"},{title:this.$t("phone"),align:"start",key:"phone",width:"300px"},{title:this.$t("class"),align:"start",key:"class",width:"300px"},{title:this.$t("location"),align:"start",key:"location",width:"300px"},{title:this.$t("score"),align:"start",key:"score",width:"300px"},{title:this.$t("mark"),align:"start",key:"mark",width:"300px"},{title:this.$t("motivation_letter"),align:"start",key:"edit1",width:"300px"},{title:this.$t("other_positive_documents"),align:"start",key:"edit2",width:"300px"},{title:this.$t("edit"),align:"start",key:"edit4",width:"300px"},{title:this.$t("delete"),align:"start",key:"edit3",width:"300px"}],this.load_messages_base(),this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("date"),sortable:!0,filter:!0},{field:"email",headerName:this.$t("email"),sortable:!0,filter:!0},{field:"phone",headerName:this.$t("phone"),sortable:!0,filter:!0},{field:"class",headerName:this.$t("class"),sortable:!0,filter:!0},{field:"mark",headerName:this.$t("mark"),sortable:!0,filter:!0},{field:"edit1",headerName:this.$t("motivation_letter"),sortable:!0,filter:!0},{field:"edit2",headerName:this.$t("other_positive_documents"),sortable:!0,filter:!0}]},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],messages:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async load_messages_base(){this.workers=[],this.roles=[];const t=new x(r);new $(r),w().language,await(await t.listDocuments(l.website_db,l.erasmus_applies,[b.orderDesc("$createdAt"),b.limit(50)])).documents.forEach(async a=>{let e={name:"",class:"",contact:"",email:"",date:"",id:"",phone:"",mark:"",motivation_letter:"",other_document:""};e.id=a.$id,e.date=a.$createdAt,e.name=a.name,e.phone=a.phone,e.email=a.email,e.mark=a.mark,e.class=a.class,e.motivation_letter=a.link_motivation_letter,e.other_document=a.link_other_document,this.messages.push(e)}),console.log(this.messages),this.loaded=!0},async delete_content(t,c){const h=new x(r),a=new $(r);try{let e=await a.deleteFile(l.fs_erasmus,c)}catch(e){console.warn(e)}try{let e=await h.deleteDocument(l.website_db,l.erasmus_applies,t)}catch(e){console.warn(e)}this.$notify(this.$t("deleted")),this.load_messages_base()},rt_time(t){return v.locale("hu"),v(t).format("LLL")},edit_content(t){this.$router.push(`/admin/erasmus/editapply/${t}`)}},calculated:{}},L={class:"text-gray-600"},E={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},V={class:"flex flex-wrap w-full mb-20"},A={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},T={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},F=o("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),Q={key:0,class:"m-auto w-full"},j=o("i",{class:"pi pi-envelope text-5xl"},null,-1),I=o("i",{class:"pi pi-envelope text-5xl"},null,-1);function U(t,c,h,a,e,_){const k=u("router-link"),g=u("v-btn"),N=u("v-data-table");return p(),y("section",L,[o("div",E,[o("div",V,[o("div",A,[o("h1",T,n(t.$t("erasmus_applies")),1),F])]),t.loaded?(p(),y("div",Q,[d(N,{height:"400",headers:t.headers,items:t.messages},{"item.date":i(({item:s})=>[f(n(_.rt_time(s.date)),1)]),"item.edit1":i(({item:s})=>[d(k,{to:"/admin/erasmus/docviewer/"+s.motivation_letter},{default:i(()=>[j]),_:2},1032,["to"])]),"item.edit2":i(({item:s})=>[s.other_document!=null?(p(),D(k,{key:0,to:"/admin/erasmus/docviewer/"+s.other_document},{default:i(()=>[I]),_:2},1032,["to"])):m("",!0)]),"item.edit4":i(({item:s})=>[m("",!0),d(g,{onClick:B=>_.edit_content(s.id,s.other_document)},{default:i(()=>[f(n(t.$t("edit")),1)]),_:2},1032,["onClick"])]),"item.edit3":i(({item:s})=>[m("",!0),d(g,{onClick:B=>_.delete_content(s.id,s.other_document)},{default:i(()=>[f(n(t.$t("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])])):m("",!0)])])}const z=C(S,[["render",U]]);export{z as default};
