import{_ as x,S as b,b as u,x as c,D as _,d as a,Q as y,c as i,a as s,i as v,w as T,V as S,F as p,f as w,t as d,k as g,o as l,n as k,W as D,y as I,z as M,X as H}from"./index-gJPdk6Gh.js";const Y={data(){return{currentTime:"",currentDate:"",currentTemperature:null,currentSlide:0,slides:[],newsItems:[],events:[],slideBackgrounds:["#f87171","#60a5fa","#34d399","#a78bfa","#fbbf24"],storage:null}},created(){this.storage=new b(u)},methods:{async updateTime(){try{const t=await fetch("https://share.tsada.edu.rs/__time__");if(!t.ok)throw new Error("Failed to fetch time");const r=await t.json();this.currentTime=c(r.date).format("HH:mm:ss"),this.currentDate=c(r.date).format("YYYY-MM-DD")}catch(t){console.warn("Falling back to local time due to error:",t),this.currentTime=c().format("HH:mm:ss"),this.currentDate=c().format("YYYY-MM-DD")}},async fetchContent(){const t=new _(u);try{const r=await t.listDocuments(a.website_db,a.tv_slides,[y.orderAsc("sorrend")]);this.slides=[],this.events=[],r.documents.forEach(n=>{const h=n.image?this.getImageUrl(n.image):null;n.type==="slide"?this.slides.push({title:n.title,text:n.text,image:h,order:n.sorrend}):n.type==="event"&&this.events.push({title:n.title,date:c(n.event_date).format("YYYY-MM-DD"),description:n.description,image:h})})}catch(r){console.error("Error fetching content:",r)}},async fetchNewsItems(){const t=new _(u);try{const r=await t.listDocuments(a.website_db,a.tv_slides);this.newsItems=r.documents.map(n=>n.news_text)}catch(r){console.error("Error fetching news:",r)}},async fetchTemperature(){const t=new _(u);try{let r=await t.getDocument(a.website_db,a.general_settings,"temperature");this.currentTemperature=r.setting_data}catch(r){console.error("Error fetching temperature:",r),this.currentTemperature="N/A"}},getImageUrl(t){return this.storage.getFileView(a.website_images,t).toString()}},mounted(){this.fetchContent(),this.fetchNewsItems(),this.fetchTemperature(),this.updateTime(),setInterval(this.updateTime,1e3),setInterval(()=>{this.slides.length>0&&(this.currentSlide=(this.currentSlide+1)%this.slides.length)},15e3),setInterval(this.fetchContent,3e4)}},f=t=>(I("data-v-bd13286c"),t=t(),M(),t),L={class:"relative h-screen w-full overflow-hidden bg-gray-900 text-white"},C={class:"absolute inset-0 flex justify-center items-center",ref:"slides"},E={class:"flex flex-wrap items-center justify-center w-full max-w-5xl"},N={key:0,class:"w-full md:w-1/2 p-4"},j=["src"],V=["innerHTML"],B=["innerHTML"],F={class:"absolute bottom-0 w-full bg-gray-800 text-white flex items-center py-6 px-8"},z=f(()=>s("img",{src:H,alt:"School Logo",class:"h-16 w-auto mr-6"},null,-1)),A={class:"flex overflow-hidden whitespace-nowrap animate-marquee space-x-12"},U={class:"ml-auto pr-8 text-3xl"},Q={class:"absolute bottom-16 right-8 text-4xl font-bold"},q={class:"absolute top-0 right-0 mt-16 mr-8 w-1/4 bg-gray-800 bg-opacity-70 p-4 rounded-lg shadow-lg"},R=f(()=>s("h3",{class:"text-4xl font-bold mb-4 text-white"},"Recent Events",-1)),W={key:0,class:"text-lg text-gray-300"},X=["src"],G={key:1,class:"w-full h-32 bg-gray-600 flex items-center justify-center text-gray-300 rounded-lg mb-2"},J=f(()=>s("span",null,"No Image Available",-1)),K=[J],O=["innerHTML"],P={class:"text-gray-400 text-sm"},Z=["innerHTML"];function $(t,r,n,h,e,ee){return l(),i("div",L,[s("div",C,[v(S,{name:"fade-slide",mode:"out-in"},{default:T(()=>[e.slides.length>0?(l(),i("div",{key:e.currentSlide,class:"flex justify-center items-center w-full h-full px-12",style:k({backgroundColor:e.slideBackgrounds[e.currentSlide%e.slideBackgrounds.length]})},[s("div",E,[e.slides[e.currentSlide].image?(l(),i("div",N,[s("img",{src:e.slides[e.currentSlide].image,alt:"Slide Image",class:"object-cover w-full h-96 rounded-lg shadow-lg"},null,8,j)])):g("",!0),s("div",{class:D([[e.slides[e.currentSlide].image?"w-full md:w-1/2":"w-full"],"p-4"])},[s("h2",{class:"text-5xl font-extrabold mb-4 animate-fade-in-down text-center",innerHTML:e.slides[e.currentSlide].title},null,8,V),s("p",{class:"text-2xl max-w-3xl animate-fade-in-up text-center",innerHTML:e.slides[e.currentSlide].text},null,8,B)],2)])],4)):g("",!0)]),_:1})],512),s("div",F,[z,s("div",A,[(l(!0),i(p,null,w(e.newsItems,(o,m)=>(l(),i("div",{key:m,class:"flex-shrink-0 text-3xl"},d(o),1))),128))]),s("div",U,d(e.currentTemperature?`${e.currentTemperature}Â°C`:"Loading..."),1)]),s("div",Q,d(e.currentDate)+" - "+d(e.currentTime),1),s("div",q,[R,e.events.length===0?(l(),i("div",W,"No recent events available.")):g("",!0),(l(!0),i(p,null,w(e.events,(o,m)=>(l(),i("div",{key:m,class:"mb-4 border-b border-gray-700 pb-4"},[o.image?(l(),i("img",{key:0,src:o.image,alt:"Event Image",class:"w-full h-32 object-cover rounded-lg mb-2"},null,8,X)):(l(),i("div",G,K)),s("h4",{class:"text-2xl font-semibold",innerHTML:o.title},null,8,O),s("p",P,d(o.date),1),s("p",{class:"text-lg",innerHTML:o.description},null,8,Z)]))),128))])])}const se=x(Y,[["render",$],["__scopeId","data-v-bd13286c"]]);export{se as default};
