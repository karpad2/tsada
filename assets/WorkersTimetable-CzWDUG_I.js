import{u as b,g as v,D as k,b as _,d as a,I as D,S,Q as m,e as y,_ as N,r as F,c as g,a as n,t as x,F as L,f as T,k as V,o as p,i as B,w as C}from"./index-_uDDhlm_.js";const q={name:"Workers",components:{},setup(){},mounted(){const r=b();this.admin=r.userLoggedin,document.title=this.$t("teachers_receiving_hour"),v.fromTo("#render_title",{opacity:0,x:"50%"},{duration:1.5,opacity:1,x:0}),this.admin?this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("p_receiving_hour"),align:"start",key:"p_receiving_hour",width:"300px"},{title:this.$t("u_receiving_hour"),align:"start",key:"u_receiving_hour",width:"300px"}]:this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("p_receiving_hour"),align:"start",key:"p_receiving_hour",width:"300px"},{title:this.$t("u_receiving_hour"),align:"start",key:"u_receiving_hour",width:"300px"}],this.load_workers_base(),this.admin?this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"receiving_hour",headerName:this.$t("receiving_hour"),sortable:!0,filter:!0},{field:"edit",headerName:this.$t("edit"),sortable:!0,filter:!0}]:this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"receiving_hour",headerName:this.$t("receiving_hour"),sortable:!0,filter:!0}],v.fromTo(".popups",{opacity:0,y:"50%"},{duration:1.5,opacity:1,y:0})},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],roles:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async new_stuff(r){const l=await new k(_).createDocument(a.website_db,a.workers,D.unique(),{roles:r});this.$router.push("/admin/worker/"+l.$id)},async load_workers_base(){const r=b();this.workers=[],this.roles=[];const o=new k(_),l=new S(_);let i=r.language,f=l.getFileView(a.website_images,a.missing_worker_picture).href,h=await o.listDocuments(a.website_db,a.roles_db,[m.orderAsc("listasorrend"),m.equal("has_receiving_hour",!0)]);for(let d=0;d<h.documents.length;d++){let s=h.documents[d],w=[],$=await o.listDocuments(a.website_db,a.workers,[m.equal("roles",[s.$id])]),u="";i=="en"?u=s.role_en:i=="hu"?u=s.role_hu:(i=="rs"||i=="sr")&&(u=y(s.role_rs)),await $.documents.forEach(async e=>{let t={name:"",contact:"",img:"",id:"",p_receiving_hour:"",u_receiving_hour:""};t.id=e.$id,console.log(e),e.p_receiving_hour!=""||e.p_receiving_hour!=null?t.p_receiving_hour=e.p_receiving_hour:t.p_receiving_hour="---",e.u_receiving_hour!=""||e.u_receiving_hour!=null?t.u_receiving_hour=e.u_receiving_hour:t.u_receiving_hour="---",i=="en"||i=="hu"?(t.name=e.worker_name_hu,t.contact=e.contact):(i=="rs"||i=="sr")&&(t.name=y(e.worker_name_rs),t.contact=e.contact),e.worker_img==""||e.worker_img==null?t.img=f:t.img=await l.getFileView(a.website_images,e.worker_img).href,w.push(t)});let c={role:"",workers:[],id:""};c.id=s.$id,c.role=u,c.workers=w,this.roles.push(c)}console.log(this.roles),this.loaded=!0},onReady(r){console.log("onReady")}}},E={class:"text-gray-600 min-h-screen"},I={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},W={class:"flex flex-wrap w-full mb-20"},Q={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},R={id:"render_title",class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},A={class:"sm:text-2xl text-sm font-medium mb-3 text-gray-900 dark:text-white"};function U(r,o,l,i,f,h){const d=F("v-data-table");return p(),g("section",E,[n("div",I,[n("div",W,[n("div",Q,[n("h1",R,x(r.$t("teachers_receiving_hour")),1),o[0]||(o[0]=n("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1))])]),r.loaded?(p(!0),g(L,{key:0},T(r.roles,s=>(p(),g("div",{class:"m-auto w-full popups",key:s.role},[n("h1",A,x(s.role),1),B(d,{height:"400",headers:r.headers,items:s.workers},{bottom:C(()=>o[1]||(o[1]=[])),_:2},1032,["headers","items"])]))),128)):V("",!0)])])}const z=N(q,[["render",U]]);export{z as default};
