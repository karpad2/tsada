import{_ as U,D as f,b as g,S as F,d,y as C,I as y,r as b,c as I,a as r,t as _,i,k as V,w as l,o as D,j as c}from"./index-FnhrnB1c.js";const T={data(){return{slides:[],currentSlideId:null,title:"",content:"",fileLink:null,img:"",imageId:"",slideHeaders:[{text:"Title",align:"start",value:"title"},{text:"Created At",align:"start",value:"createdAt"},{text:"Actions",align:"end",value:"actions",sortable:!1}],events:[],currentEventId:null,eventTitle:"",eventDescription:"",eventDate:"",eventFileLink:null,eventImg:"",eventImageId:"",eventHeaders:[{text:"Title",align:"start",value:"title"},{text:"Date",align:"start",value:"date"},{text:"Actions",align:"end",value:"actions",sortable:!1}]}},mounted(){this.fetchContent()},methods:{async fetchContent(){const t=new f(g),e=new F(g);try{const n=await t.listDocuments(d.website_db,d.tv_slides);this.slides=[],this.events=[];for(const a of n.documents){const s=a.image?e.getFileView(d.website_images,a.image).toString():null;a.type==="slide"?this.slides.push({id:a.$id,title:a.title,createdAt:C(a.$createdAt).format("YYYY-MM-DD"),sorrend:parseInt(a.sorrend),image:s}):a.type==="event"&&this.events.push({id:a.$id,title:a.title,date:C(a.event_date).format("YYYY-MM-DD"),description:a.description,image:s})}this.slides.sort((a,s)=>a.sorrend-s.sorrend)}catch(n){console.error("Error fetching content:",n)}},editSlide(t){const e=this.slides.find(n=>n.id===t);e&&(this.currentSlideId=t,this.title=e.title,this.content=e.text,this.img=e.image,this.imageId=e.imageId)},async saveSlide(){const t=new f(g),e={type:"slide",title:this.title,text:this.content,image:this.imageId,sorrend:this.slides.length.toString()};try{let n;this.currentSlideId===null?n=(await t.createDocument(d.website_db,d.tv_slides,y.unique(),e)).$id:(await t.updateDocument(d.website_db,d.tv_slides,this.currentSlideId,e),n=this.currentSlideId),this.currentSlideId=n,this.fetchContent(),this.resetSlideForm()}catch(n){console.error("Error saving slide:",n)}},resetSlideForm(){this.currentSlideId=null,this.title="",this.content="",this.fileLink=null,this.img="",this.imageId=""},async removeSlide(t){const e=new f(g);try{await e.deleteDocument(d.website_db,d.tv_slides,t),this.fetchContent()}catch(n){console.error("Error deleting slide:",n)}},moveSlideUp(t){if(t>0){const e=this.slides[t-1];this.slides[t-1]=this.slides[t],this.slides[t]=e,this.updateSlideOrder()}},moveSlideDown(t){if(t<this.slides.length-1){const e=this.slides[t+1];this.slides[t+1]=this.slides[t],this.slides[t]=e,this.updateSlideOrder()}},async updateSlideOrder(){const t=new f(g);this.slides.forEach(async(e,n)=>{e.sorrend=n.toString(),await t.updateDocument(d.website_db,d.tv_slides,e.id,{sorrend:e.sorrend})})},editEvent(t){const e=this.events.find(n=>n.id===t);e&&(this.currentEventId=t,this.eventTitle=e.title,this.eventDescription=e.description,this.eventDate=e.date,this.eventImg=e.image,this.eventImageId=e.imageId)},async saveEvent(){const t=new f(g),e={type:"event",title:this.eventTitle,description:this.eventDescription,event_date:this.eventDate,image:this.eventImageId};try{let n;this.currentEventId===null?n=(await t.createDocument(d.website_db,d.tv_slides,y.unique(),e)).$id:(await t.updateDocument(d.website_db,d.tv_slides,this.currentEventId,e),n=this.currentEventId),this.currentEventId=n,this.fetchContent(),this.resetEventForm()}catch(n){console.error("Error saving event:",n)}},resetEventForm(){this.currentEventId=null,this.eventTitle="",this.eventDescription="",this.eventDate="",this.eventFileLink=null,this.eventImg="",this.eventImageId=""},async removeEvent(t){const e=new f(g);try{await e.deleteDocument(d.website_db,d.tv_slides,t),this.fetchContent()}catch(n){console.error("Error deleting event:",n)}},moveEventUp(t){if(t>0){const e=this.events[t-1];this.events[t-1]=this.events[t],this.events[t]=e,this.updateEventOrder()}},moveEventDown(t){if(t<this.events.length-1){const e=this.events[t+1];this.events[t+1]=this.events[t],this.events[t]=e,this.updateEventOrder()}},async updateEventOrder(){const t=new f(g);this.events.forEach(async(e,n)=>{e.sorrend=n.toString(),await t.updateDocument(d.website_db,d.tv_slides,e.id,{sorrend:e.sorrend})})}}},A={class:"container mx-auto py-8"},L={class:"mb-12 p-6 bg-gray-100 rounded-lg shadow-md"},Y={class:"text-2xl font-bold mb-4"},O={key:0,class:"my-4"},H=["src"],M={class:"flex space-x-2"},N={class:"mt-12 p-6 bg-gray-100 rounded-lg shadow-md"},B={class:"text-2xl font-bold mb-4"},q={key:0,class:"my-4"},j=["src"],P={class:"text-2xl font-bold mb-4"},z={class:"flex space-x-2"};function G(t,e,n,a,s,v){const w=b("v-text-field"),E=b("ckeditor"),k=b("v-file-input"),u=b("v-btn"),h=b("v-icon"),S=b("v-data-table");return D(),I("div",A,[r("section",L,[r("h2",Y,_(t.$t("edit_slide")),1),i(w,{modelValue:s.title,"onUpdate:modelValue":e[0]||(e[0]=o=>s.title=o),label:t.$t("title"),counter:"100","hide-details":""},null,8,["modelValue","label"]),i(E,{modelValue:s.content,"onUpdate:modelValue":e[1]||(e[1]=o=>s.content=o)},null,8,["modelValue"]),i(k,{onChange:t.fileUpload,modelValue:s.fileLink,"onUpdate:modelValue":e[2]||(e[2]=o=>s.fileLink=o),accept:"image/*",label:"Slide Image Upload"},null,8,["onChange","modelValue"]),s.img?(D(),I("div",O,[r("span",null,_(t.$t("preview"))+":",1),r("img",{class:"h-40 w-auto rounded",src:s.img,alt:"Slide Image"},null,8,H)])):V("",!0),i(u,{onClick:v.saveSlide,class:"mt-5"},{default:l(()=>[c(_(s.currentSlideId?"Save Changes":"Add Slide"),1)]),_:1},8,["onClick"])]),r("section",null,[e[11]||(e[11]=r("h2",{class:"text-2xl font-bold mb-4"},"Slides",-1)),i(S,{items:s.slides,headers:s.slideHeaders},{"item.actions":l(({item:o,index:m})=>[r("div",M,[i(u,{onClick:p=>v.editSlide(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>e[7]||(e[7]=[c("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),i(u,{onClick:p=>v.removeSlide(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>e[8]||(e[8]=[c("mdi-delete")])),_:1})]),_:2},1032,["onClick"]),i(u,{onClick:p=>v.moveSlideUp(m),icon:"",disabled:m===0},{default:l(()=>[i(h,null,{default:l(()=>e[9]||(e[9]=[c("mdi-arrow-up")])),_:1})]),_:2},1032,["onClick","disabled"]),i(u,{onClick:p=>v.moveSlideDown(m),icon:"",disabled:m===s.slides.length-1},{default:l(()=>[i(h,null,{default:l(()=>e[10]||(e[10]=[c("mdi-arrow-down")])),_:1})]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","headers"])]),r("section",N,[r("h2",B,_(t.$t("edit_events")),1),i(w,{modelValue:s.eventTitle,"onUpdate:modelValue":e[3]||(e[3]=o=>s.eventTitle=o),label:"Event Title",counter:"100","hide-details":""},null,8,["modelValue"]),i(w,{modelValue:s.eventDate,"onUpdate:modelValue":e[4]||(e[4]=o=>s.eventDate=o),label:"Event Date",type:"date","hide-details":""},null,8,["modelValue"]),i(E,{modelValue:s.eventDescription,"onUpdate:modelValue":e[5]||(e[5]=o=>s.eventDescription=o)},null,8,["modelValue"]),i(k,{onChange:t.eventFileUpload,modelValue:s.eventFileLink,"onUpdate:modelValue":e[6]||(e[6]=o=>s.eventFileLink=o),accept:"image/*",label:"Event Image Upload"},null,8,["onChange","modelValue"]),s.eventImg?(D(),I("div",q,[e[12]||(e[12]=r("span",null,"Preview:",-1)),r("img",{class:"h-40 w-auto rounded",src:s.eventImg,alt:"Event Image"},null,8,j)])):V("",!0),i(u,{onClick:v.saveEvent,class:"mt-5"},{default:l(()=>[c(_(s.currentEventId?t.$t("save"):"Add Event"),1)]),_:1},8,["onClick"])]),r("section",null,[r("h2",P,_(t.$t("events")),1),i(S,{items:s.events,headers:s.eventHeaders},{"item.actions":l(({item:o,index:m})=>[r("div",z,[i(u,{onClick:p=>v.editEvent(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>e[13]||(e[13]=[c("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),i(u,{onClick:p=>v.removeEvent(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>e[14]||(e[14]=[c("mdi-delete")])),_:1})]),_:2},1032,["onClick"]),i(u,{onClick:p=>v.moveEventUp(m),icon:"",disabled:m===0},{default:l(()=>[i(h,null,{default:l(()=>e[15]||(e[15]=[c("mdi-arrow-up")])),_:1})]),_:2},1032,["onClick","disabled"]),i(u,{onClick:p=>v.moveEventDown(m),icon:"",disabled:m===s.events.length-1},{default:l(()=>[i(h,null,{default:l(()=>e[16]||(e[16]=[c("mdi-arrow-down")])),_:1})]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","headers"])])])}const K=U(T,[["render",G],["__scopeId","data-v-ee349410"]]);export{K as default};
