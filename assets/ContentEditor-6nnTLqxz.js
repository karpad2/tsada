import{D as c,b as d,S as C,u as k,d as a,Q as V,I as D,_ as U,r as _,c as h,a as u,h as i,w as x,j as f,t as p,g as v,o as m}from"./index-79_NoGyA.js";const T={data(){return{title_en:"",title_hu:"",title_rs:"",content_rs:"",content_hu:"",content_en:"",srb_flag:!0,hun_flag:!0,en_flag:!1,visible:!1,default_img_link:"",file_link:null,img:""}},components:{},mounted(){this.getMD()},methods:{async getMD(){const n=new c(d),e=new C(d);k();let s=await n.listDocuments(a.website_db,a.about_us_db,[V.equal("$id",this.$route.params.id)]);this.title_rs=s.documents[0].title_rs,this.content_rs=s.documents[0].text_rs,this.title_hu=s.documents[0].title_hu,this.content_hu=s.documents[0].text_hu,this.title_en=s.documents[0].title_en,this.content_en=s.documents[0].text_en,this.visible=s.documents[0].visible,s.documents[0].default_image==null||s.documents[0].default_image==""?this.img="https://dummyimage.com/720x400":this.img=e.getFileView(a.website_images,s.documents[0].default_image).toString(),s.documents[0].gallery,console.log(s.documents[0].gallery)},async save(){const n=new c(d);await n.listDocuments(a.website_db,a.about_us_db,[V.equal("$id",this.$route.params.id)]),await n.updateDocument(a.website_db,a.about_us_db,this.$route.params.id,{title_rs:this.title_rs,title_hu:this.title_hu,title_en:this.title_en,text_en:this.content_en,text_hu:this.content_hu,text_rs:this.content_rs,isHungarian:this.hun_flag,isSerbian:this.srb_flag,isEnglish:this.en_flag,visible:this.visible,default_image:this.default_image}),this.$notify(this.$t("saved"))},async delete_content(){await new c(d).deleteDocument(a.website_db,a.about_us_db,this.$route.params.id),this.$notify(this.$t("deleted")),this.router.push("/home")},async file_upload(){if(!this.file_link){console.warn("no file");return}console.log("file_upload");const e=await new C(d).createFile(a.website_images,D.unique(),this.file_link[0]);this.default_image=e.$id,this.save(),this.getMD(),this.$notify(this.$t("file_uploaded"))}}},S={class:"relative mb-4 container px-5 mx-auto bg-white"},E={class:"flex flex-wrap -m-4"},N={class:"xl:w-1/5 md:w-1/2 p-4 cursor-pointer"},Q={class:"bg-slate-100/30 hover:bg-sky-600/30 dark:bg-slate-300/30 p-6 rounded-lg shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]"},j=["src"],q={key:0},B={key:0},M={key:0};function F(n,e,s,I,t,o){const r=_("v-switch"),w=_("v-btn"),y=_("v-file-input"),g=_("v-text-field"),b=_("QuillEditor");return m(),h("div",S,[u("div",null,[i(r,{onChange:o.save,modelValue:t.visible,"onUpdate:modelValue":e[0]||(e[0]=l=>t.visible=l),label:n.$t("visible")},null,8,["onChange","modelValue","label"]),i(w,{onClick:o.save,class:"m-5"},{default:x(()=>[f(p(n.$t("save")),1)]),_:1},8,["onClick"]),i(w,{onClick:o.delete_content},{default:x(()=>[f(p(n.$t("delete")),1)]),_:1},8,["onClick"])]),u("div",null,[i(y,{onChange:o.file_upload,modelValue:t.file_link,"onUpdate:modelValue":e[1]||(e[1]=l=>t.file_link=l),accept:"image/*",label:n.$t("fileupload")},null,8,["onChange","modelValue","label"]),f(" "+p(n.$t("preview"))+" ",1),u("div",E,[u("div",N,[u("div",Q,[u("img",{class:"h-40 rounded w-full object-cover object-center mb-6 transition duration-300 ease-in-out",src:t.img,alt:"content"},null,8,j)])])])]),u("div",null,[i(r,{onChange:o.save,modelValue:t.srb_flag,"onUpdate:modelValue":e[2]||(e[2]=l=>t.srb_flag=l),label:n.$t("srb")},null,8,["onChange","modelValue","label"]),t.srb_flag?(m(),h("div",q,[i(g,{onChange:o.save,modelValue:t.title_rs,"onUpdate:modelValue":e[3]||(e[3]=l=>t.title_rs=l),counter:100,label:n.$t("srb_title"),"hide-details":""},null,8,["onChange","modelValue","label"]),i(b,{onTextChange:o.save,"content-type":"html",style:{"min-height":"200px"},content:t.content_rs,"onUpdate:content":e[4]||(e[4]=l=>t.content_rs=l),toolbar:"full",theme:"snow"},null,8,["onTextChange","content"])])):v("",!0)]),u("div",null,[i(r,{modelValue:t.hun_flag,"onUpdate:modelValue":e[5]||(e[5]=l=>t.hun_flag=l),onChange:o.save,label:n.$t("hu")},null,8,["modelValue","onChange","label"]),t.hun_flag?(m(),h("div",B,[i(g,{modelValue:t.title_hu,"onUpdate:modelValue":e[6]||(e[6]=l=>t.title_hu=l),counter:100,onChange:o.save,label:n.$t("hu_title"),"hide-details":""},null,8,["modelValue","onChange","label"]),i(b,{"content-type":"html",onTextChange:o.save,style:{"min-height":"200px"},content:t.content_hu,"onUpdate:content":e[7]||(e[7]=l=>t.content_hu=l),toolbar:"full",theme:"snow"},null,8,["onTextChange","content"])])):v("",!0)]),u("div",null,[i(r,{modelValue:t.en_flag,"onUpdate:modelValue":e[8]||(e[8]=l=>t.en_flag=l),onChange:o.save,label:n.$t("en")},null,8,["modelValue","onChange","label"]),t.en_flag?(m(),h("div",M,[i(g,{modelValue:t.title_en,"onUpdate:modelValue":e[9]||(e[9]=l=>t.title_en=l),counter:100,onChange:o.save,label:n.$t("en_title"),"hide-details":""},null,8,["modelValue","onChange","label"]),i(b,{"content-type":"html",onTextChange:o.save,style:{"min-height":"200px"},content:t.content_en,"onUpdate:content":e[10]||(e[10]=l=>t.content_en=l),toolbar:"full",theme:"snow"},null,8,["onTextChange","content"])])):v("",!0)])])}const L=U(T,[["render",F]]);export{L as default};
