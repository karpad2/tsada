import{_ as p,S as x,b as u,z as d,D as g,d as c,Q as b,c as i,a as s,i as y,w as v,V as T,W as k,F as _,f as w,t as a,k as f,o as l,n as D,X as S}from"./index-BfJHO_zn.js";const M={data(){return{currentTime:"",currentDate:"",currentTemperature:null,currentSlide:0,slides:[],newsItems:[],events:[],slideBackgrounds:["#f87171","#60a5fa","#34d399","#a78bfa","#fbbf24"],storage:null}},created(){this.storage=new x(u)},methods:{async updateTime(){try{const t=await fetch("https://share.tsada.edu.rs/__time__");if(!t.ok)throw new Error("Failed to fetch time");const r=await t.json();this.currentTime=d(r.date).format("HH:mm:ss"),this.currentDate=d(r.date).format("YYYY-MM-DD")}catch(t){console.warn("Falling back to local time due to error:",t),this.currentTime=d().format("HH:mm:ss"),this.currentDate=d().format("YYYY-MM-DD")}},async fetchContent(){const t=new g(u);try{const r=await t.listDocuments(c.website_db,c.tv_slides,[b.orderAsc("sorrend")]);this.slides=[],this.events=[],r.documents.forEach(n=>{const m=n.image?this.getImageUrl(n.image):null;n.type==="slide"?this.slides.push({title:n.title,text:n.text,image:m,order:n.sorrend}):n.type==="event"&&this.events.push({title:n.title,date:d(n.event_date).format("YYYY-MM-DD"),description:n.description,image:m})})}catch{}},async fetchNewsItems(){const t=new g(u);try{const r=await t.listDocuments(c.website_db,c.tv_slides);this.newsItems=r.documents.map(n=>n.news_text)}catch{}},async fetchTemperature(){const t=new g(u);try{let r=await t.getDocument(c.website_db,c.general_settings,"temperature");this.currentTemperature=r.setting_data}catch{this.currentTemperature="N/A"}},getImageUrl(t){return this.storage.getFileView(c.website_images,t).toString()}},mounted(){this.fetchContent(),this.fetchNewsItems(),this.fetchTemperature(),this.updateTime(),setInterval(this.updateTime,1e3),setInterval(()=>{this.slides.length>0&&(this.currentSlide=(this.currentSlide+1)%this.slides.length)},15e3),setInterval(this.fetchContent,3e4)}},I={class:"relative h-screen w-full overflow-hidden bg-gray-900 text-white"},H={class:"absolute inset-0 flex justify-center items-center",ref:"slides"},Y={class:"flex flex-wrap items-center justify-center w-full max-w-5xl"},L={key:0,class:"w-full md:w-1/2 p-4"},C=["src"],j=["innerHTML"],V=["innerHTML"],B={class:"absolute bottom-0 w-full bg-gray-800 text-white flex items-center py-6 px-8"},N={class:"flex overflow-hidden whitespace-nowrap animate-marquee space-x-12"},F={class:"ml-auto pr-8 text-3xl"},E={class:"absolute bottom-16 right-8 text-4xl font-bold"},z={class:"absolute top-0 right-0 mt-16 mr-8 w-1/4 bg-gray-800 bg-opacity-70 p-4 rounded-lg shadow-lg"},U={class:"text-4xl font-bold mb-4 text-white"},A={key:0,class:"text-lg text-gray-300"},Q=["src"],q={key:1,class:"w-full h-32 bg-gray-600 flex items-center justify-center text-gray-300 rounded-lg mb-2"},W=["innerHTML"],X={class:"text-gray-400 text-sm"},G=["innerHTML"];function J(t,r,n,m,e,K){return l(),i("div",I,[s("div",H,[y(T,{name:"fade-slide",mode:"out-in"},{default:v(()=>[e.slides.length>0?(l(),i("div",{key:e.currentSlide,class:"flex justify-center items-center w-full h-full px-12",style:D({backgroundColor:e.slideBackgrounds[e.currentSlide%e.slideBackgrounds.length]})},[s("div",Y,[e.slides[e.currentSlide].image?(l(),i("div",L,[s("img",{src:e.slides[e.currentSlide].image,alt:"Slide Image",class:"object-cover w-full h-96 rounded-lg shadow-lg"},null,8,C)])):f("",!0),s("div",{class:S([[e.slides[e.currentSlide].image?"w-full md:w-1/2":"w-full"],"p-4"])},[s("h2",{class:"text-5xl font-extrabold mb-4 animate-fade-in-down text-center",innerHTML:e.slides[e.currentSlide].title},null,8,j),s("p",{class:"text-2xl max-w-3xl animate-fade-in-up text-center",innerHTML:e.slides[e.currentSlide].text},null,8,V)],2)])],4)):f("",!0)]),_:1})],512),s("div",B,[r[0]||(r[0]=s("img",{src:k,alt:"School Logo",class:"h-16 w-auto mr-6"},null,-1)),s("div",N,[(l(!0),i(_,null,w(e.newsItems,(o,h)=>(l(),i("div",{key:h,class:"flex-shrink-0 text-3xl"},a(o),1))),128))]),s("div",F,a(e.currentTemperature?`${e.currentTemperature}Â°C`:t.$t("loading")),1)]),s("div",E,a(e.currentDate)+" - "+a(e.currentTime),1),s("div",z,[s("h3",U,a(t.$t("events")),1),e.events.length===0?(l(),i("div",A,a(t.$t("noevents")),1)):f("",!0),(l(!0),i(_,null,w(e.events,(o,h)=>(l(),i("div",{key:h,class:"mb-4 border-b border-gray-700 pb-4"},[o.image?(l(),i("img",{key:0,src:o.image,alt:"Event Image",class:"w-full h-32 object-cover rounded-lg mb-2"},null,8,Q)):(l(),i("div",q,[s("span",null,a(t.$t("noimage")),1)])),s("h4",{class:"text-2xl font-semibold",innerHTML:o.title},null,8,W),s("p",X,a(o.date),1),s("p",{class:"text-lg",innerHTML:o.description},null,8,G)]))),128))])])}const P=p(M,[["render",J],["__scopeId","data-v-d17f6806"]]);export{P as default};
