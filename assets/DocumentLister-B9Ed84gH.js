import{u as m,D as g,b as u,d as l,I as v,S,Q as b,_ as L,r as _,c as w,a as n,t as h,i as f,w as i,h as N,k,o as p,j as y}from"./index-CAnCyNTF.js";import{m as c}from"./moment-with-locales-CmgQjDXu.js";const C={name:"Workers",components:{},setup(){},mounted(){const t=m();this.admin=t.userLoggedin,this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("open_document"),align:"start",key:"open",width:"300px"}],this.load_documents_base(),this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("date"),sortable:!0,filter:!0},{field:"open",headerName:this.$t("open_message"),sortable:!0,filter:!0}],this.admin&&(this.headers.push({title:this.$t("edit_document"),align:"start",key:"edit",width:"300px"}),this.colDefs.push({field:"edit",headerName:this.$t("edit_message"),sortable:!0,filter:!0}))},data:()=>({_title:"",workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],documents:[],loaded:!1,headers:[],colDefs:[],admin:!1}),methods:{rt_time(t){let o=m().language;return o=="rs"||o=="sr"?c.locale("sr"):o=="hu"?c.locale("hu"):o=="en"&&c.locale("en"),c(t).format("LLL")},async new_stuff(){const e=await new g(u).createDocument(l.website_db,l.documents_db,v.unique(),{documentCategories:this.$route.params.id});this.$router.push("/admin/document/"+e.$id)},async load_documents_base(){let e=m().language;this.workers=[],this.roles=[];const o=new g(u);new S(u);let r=await o.getDocument(l.website_db,l.document_categories_db,this.$route.params.id);e=="rs"||e=="sr"?this._title=r.category_name_rs:e=="hu"?this._title=r.category_name_hu:e=="en"&&(this._title=r.category_name_en),await(await o.listDocuments(l.website_db,l.documents_db,[b.equal("documentCategories",this.$route.params.id),b.orderDesc("$createdAt")])).documents.forEach(async a=>{let s={name:"",date:"",id:"",doc_id:""};e=="rs"||e=="sr"?s.name=a.document_title_rs:e=="hu"?s.name=a.document_title_hu:e=="en"&&(s.name=a.document_title_en),s.id=a.$id,s.doc_id=a.document_id,s.date=a.$createdAt,this.documents.push(s)}),console.log(this.messages),this.loaded=!0}},calculated:{}},B={class:"text-gray-600 min-h-screen"},V={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},E={class:"flex flex-wrap w-full mb-20"},I={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},T={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},q=n("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),z={key:0,class:"m-auto w-full"},A=n("i",{class:"pi pi-book icon_size"},null,-1),Q=n("i",{class:"pi pi-cloud-upload icon_size"},null,-1);function j(t,e,o,r,$,a){const s=_("router-link"),x=_("v-data-table"),D=_("v-btn");return p(),w("section",B,[n("div",V,[n("div",E,[n("div",I,[n("h1",T,h(t._title),1),q])]),t.loaded?(p(),w("div",z,[f(x,{height:"400",headers:t.headers,items:t.documents,"items-per-page":-1},{"item.date":i(({item:d})=>[y(h(a.rt_time(d.date)),1)]),"item.open":i(({item:d})=>[f(s,{to:"/document/"+d.doc_id},{default:i(()=>[A]),_:2},1032,["to"])]),"item.edit":i(({item:d})=>[f(s,{to:"/admin/document/"+d.id},{default:i(()=>[Q]),_:2},1032,["to"])]),bottom:i(()=>[]),_:1},8,["headers","items"]),t.admin?(p(),N(D,{key:0,onClick:e[0]||(e[0]=d=>a.new_stuff()),class:"m-5"},{default:i(()=>[y(h(t.$t("add_new_document_in_that_category")),1)]),_:1})):k("",!0)])):k("",!0)])])}const W=L(C,[["render",j]]);export{W as default};
