import{_ as F,D as g,b as _,S as T,d,x as C,I as y,r as f,c as I,a as r,t as b,i,k as V,w as l,o as S,j as u,y as A,z as L}from"./index-CAnCyNTF.js";const Y={data(){return{slides:[],currentSlideId:null,title:"",content:"",fileLink:null,img:"",imageId:"",slideHeaders:[{text:"Title",align:"start",value:"title"},{text:"Created At",align:"start",value:"createdAt"},{text:"Actions",align:"end",value:"actions",sortable:!1}],events:[],currentEventId:null,eventTitle:"",eventDescription:"",eventDate:"",eventFileLink:null,eventImg:"",eventImageId:"",eventHeaders:[{text:"Title",align:"start",value:"title"},{text:"Date",align:"start",value:"date"},{text:"Actions",align:"end",value:"actions",sortable:!1}]}},mounted(){this.fetchContent()},methods:{async fetchContent(){const e=new g(_),t=new T(_);try{const n=await e.listDocuments(d.website_db,d.tv_slides);this.slides=[],this.events=[];for(const a of n.documents){const s=a.image?t.getFileView(d.website_images,a.image).toString():null;a.type==="slide"?this.slides.push({id:a.$id,title:a.title,createdAt:C(a.$createdAt).format("YYYY-MM-DD"),sorrend:parseInt(a.sorrend),image:s}):a.type==="event"&&this.events.push({id:a.$id,title:a.title,date:C(a.event_date).format("YYYY-MM-DD"),description:a.description,image:s})}this.slides.sort((a,s)=>a.sorrend-s.sorrend)}catch(n){console.error("Error fetching content:",n)}},editSlide(e){const t=this.slides.find(n=>n.id===e);t&&(this.currentSlideId=e,this.title=t.title,this.content=t.text,this.img=t.image,this.imageId=t.imageId)},async saveSlide(){const e=new g(_),t={type:"slide",title:this.title,text:this.content,image:this.imageId,sorrend:this.slides.length.toString()};try{let n;this.currentSlideId===null?n=(await e.createDocument(d.website_db,d.tv_slides,y.unique(),t)).$id:(await e.updateDocument(d.website_db,d.tv_slides,this.currentSlideId,t),n=this.currentSlideId),this.currentSlideId=n,this.fetchContent(),this.resetSlideForm()}catch(n){console.error("Error saving slide:",n)}},resetSlideForm(){this.currentSlideId=null,this.title="",this.content="",this.fileLink=null,this.img="",this.imageId=""},async removeSlide(e){const t=new g(_);try{await t.deleteDocument(d.website_db,d.tv_slides,e),this.fetchContent()}catch(n){console.error("Error deleting slide:",n)}},moveSlideUp(e){if(e>0){const t=this.slides[e-1];this.slides[e-1]=this.slides[e],this.slides[e]=t,this.updateSlideOrder()}},moveSlideDown(e){if(e<this.slides.length-1){const t=this.slides[e+1];this.slides[e+1]=this.slides[e],this.slides[e]=t,this.updateSlideOrder()}},async updateSlideOrder(){const e=new g(_);this.slides.forEach(async(t,n)=>{t.sorrend=n.toString(),await e.updateDocument(d.website_db,d.tv_slides,t.id,{sorrend:t.sorrend})})},editEvent(e){const t=this.events.find(n=>n.id===e);t&&(this.currentEventId=e,this.eventTitle=t.title,this.eventDescription=t.description,this.eventDate=t.date,this.eventImg=t.image,this.eventImageId=t.imageId)},async saveEvent(){const e=new g(_),t={type:"event",title:this.eventTitle,description:this.eventDescription,event_date:this.eventDate,image:this.eventImageId};try{let n;this.currentEventId===null?n=(await e.createDocument(d.website_db,d.tv_slides,y.unique(),t)).$id:(await e.updateDocument(d.website_db,d.tv_slides,this.currentEventId,t),n=this.currentEventId),this.currentEventId=n,this.fetchContent(),this.resetEventForm()}catch(n){console.error("Error saving event:",n)}},resetEventForm(){this.currentEventId=null,this.eventTitle="",this.eventDescription="",this.eventDate="",this.eventFileLink=null,this.eventImg="",this.eventImageId=""},async removeEvent(e){const t=new g(_);try{await t.deleteDocument(d.website_db,d.tv_slides,e),this.fetchContent()}catch(n){console.error("Error deleting event:",n)}},moveEventUp(e){if(e>0){const t=this.events[e-1];this.events[e-1]=this.events[e],this.events[e]=t,this.updateEventOrder()}},moveEventDown(e){if(e<this.events.length-1){const t=this.events[e+1];this.events[e+1]=this.events[e],this.events[e]=t,this.updateEventOrder()}},async updateEventOrder(){const e=new g(_);this.events.forEach(async(t,n)=>{t.sorrend=n.toString(),await e.updateDocument(d.website_db,d.tv_slides,t.id,{sorrend:t.sorrend})})}}},U=e=>(A("data-v-ee349410"),e=e(),L(),e),O={class:"container mx-auto py-8"},H={class:"mb-12 p-6 bg-gray-100 rounded-lg shadow-md"},M={class:"text-2xl font-bold mb-4"},N={key:0,class:"my-4"},B=["src"],q=U(()=>r("h2",{class:"text-2xl font-bold mb-4"},"Slides",-1)),j={class:"flex space-x-2"},z={class:"mt-12 p-6 bg-gray-100 rounded-lg shadow-md"},P={class:"text-2xl font-bold mb-4"},G={key:0,class:"my-4"},J=U(()=>r("span",null,"Preview:",-1)),K=["src"],Q={class:"text-2xl font-bold mb-4"},R={class:"flex space-x-2"};function W(e,t,n,a,s,c){const w=f("v-text-field"),D=f("ckeditor"),E=f("v-file-input"),v=f("v-btn"),h=f("v-icon"),k=f("v-data-table");return S(),I("div",O,[r("section",H,[r("h2",M,b(e.$t("edit_slide")),1),i(w,{modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=o=>s.title=o),label:e.$t("title"),counter:"100","hide-details":""},null,8,["modelValue","label"]),i(D,{modelValue:s.content,"onUpdate:modelValue":t[1]||(t[1]=o=>s.content=o)},null,8,["modelValue"]),i(E,{onChange:e.fileUpload,modelValue:s.fileLink,"onUpdate:modelValue":t[2]||(t[2]=o=>s.fileLink=o),accept:"image/*",label:"Slide Image Upload"},null,8,["onChange","modelValue"]),s.img?(S(),I("div",N,[r("span",null,b(e.$t("preview"))+":",1),r("img",{class:"h-40 w-auto rounded",src:s.img,alt:"Slide Image"},null,8,B)])):V("",!0),i(v,{onClick:c.saveSlide,class:"mt-5"},{default:l(()=>[u(b(s.currentSlideId?"Save Changes":"Add Slide"),1)]),_:1},8,["onClick"])]),r("section",null,[q,i(k,{items:s.slides,headers:s.slideHeaders},{"item.actions":l(({item:o,index:m})=>[r("div",j,[i(v,{onClick:p=>c.editSlide(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.removeSlide(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-delete")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.moveSlideUp(m),icon:"",disabled:m===0},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-up")]),_:1})]),_:2},1032,["onClick","disabled"]),i(v,{onClick:p=>c.moveSlideDown(m),icon:"",disabled:m===s.slides.length-1},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-down")]),_:1})]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","headers"])]),r("section",z,[r("h2",P,b(e.$t("edit_events")),1),i(w,{modelValue:s.eventTitle,"onUpdate:modelValue":t[3]||(t[3]=o=>s.eventTitle=o),label:"Event Title",counter:"100","hide-details":""},null,8,["modelValue"]),i(w,{modelValue:s.eventDate,"onUpdate:modelValue":t[4]||(t[4]=o=>s.eventDate=o),label:"Event Date",type:"date","hide-details":""},null,8,["modelValue"]),i(D,{modelValue:s.eventDescription,"onUpdate:modelValue":t[5]||(t[5]=o=>s.eventDescription=o)},null,8,["modelValue"]),i(E,{onChange:e.eventFileUpload,modelValue:s.eventFileLink,"onUpdate:modelValue":t[6]||(t[6]=o=>s.eventFileLink=o),accept:"image/*",label:"Event Image Upload"},null,8,["onChange","modelValue"]),s.eventImg?(S(),I("div",G,[J,r("img",{class:"h-40 w-auto rounded",src:s.eventImg,alt:"Event Image"},null,8,K)])):V("",!0),i(v,{onClick:c.saveEvent,class:"mt-5"},{default:l(()=>[u(b(s.currentEventId?e.$t("save"):"Add Event"),1)]),_:1},8,["onClick"])]),r("section",null,[r("h2",Q,b(e.$t("events")),1),i(k,{items:s.events,headers:s.eventHeaders},{"item.actions":l(({item:o,index:m})=>[r("div",R,[i(v,{onClick:p=>c.editEvent(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.removeEvent(o.id),icon:""},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-delete")]),_:1})]),_:2},1032,["onClick"]),i(v,{onClick:p=>c.moveEventUp(m),icon:"",disabled:m===0},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-up")]),_:1})]),_:2},1032,["onClick","disabled"]),i(v,{onClick:p=>c.moveEventDown(m),icon:"",disabled:m===s.events.length-1},{default:l(()=>[i(h,null,{default:l(()=>[u("mdi-arrow-down")]),_:1})]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","headers"])])])}const Z=F(Y,[["render",W],["__scopeId","data-v-ee349410"]]);export{Z as default};
