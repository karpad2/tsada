import{q as g,u as a,G as m,b as _,H as v,J as x,_ as k,r as p,c as d,a as t,t as l,K as L,L as h,M as b,i as f,w as V,o as r,k as U}from"./index-JxVxLFZV.js";const C={name:"Login",data(){return{animation_backgound:!1,user_name:"",uid:""}},setup(){const e=g(""),s=g("");return{email:e,password:s}},mounted(){const e=a();document.title=this.$t("login"),this.checklogin(),e.isLoggedin&&this.get_user_settings(),console.log("login")},methods:{async checklogin(){const e=a();e.setUserLoggedin(!1);const s=new m(_);try{const o=await s.get();console.log(o),e.setUserLoggedin(!0)}catch{e.setUserLoggedin(!1)}},async get_user_settings(){},async set_user_setting(){a().setAnimation(this.animation_backgound),console.log("setted_animation")},login_by_app(){const e=v.createEmailSession(this.email,this.password),s=a();e.then(o=>{console.log(o),this.$notify(this.$t("success")),a().setUserLoggedin(!0),console.log(o),s.setuid(o.userId)},o=>{this.$notify(this.$t("login_failure")),console.log(o)})},async logout(){a().setUserLoggedin(!1),await new m(_).deleteSession("current"),console.warn("logout"),x.push("/home")},animation_setting(){}},computed:{isLoggedin(){return a().userLoggedin}}},$={class:""},B={key:0},S={class:"font-[sans-serif]"},q={class:"min-h-screen flex flex-col items-center justify-center px-4 bg-white/60"},A={class:"max-w-md w-full"},M={class:"p-8 rounded-2xl shadow"},N={class:"text-gray-800 text-center text-2xl font-bold"},j={class:"text-gray-800 text-sm mb-2 block"},z={class:"relative flex items-center"},D=["placeholder"],E={class:"text-gray-800 text-sm mb-2 block"},T={class:"relative flex items-center"},G=["placeholder"],H=t("div",{class:"flex flex-wrap items-center justify-between gap-4"},[t("div",{class:"flex items-center"}),t("div",{class:"text-sm"})],-1),I={class:"!mt-8"},J={key:1,class:"w-1/2 h-full m-auto p-40"};function K(e,s,o,c,u,i){const w=p("v-switch"),y=p("VBtn");return r(),d("div",$,[i.isLoggedin?(r(),d("div",J,[t("h1",null,l(e.$t("Account page")),1),t("h2",null,l(e.$t("welcome"))+" "+l()+" !",1),t("div",null,[f(w,{onChange:i.set_user_setting,modelValue:u.animation_backgound,"onUpdate:modelValue":s[4]||(s[4]=n=>u.animation_backgound=n),label:e.$t("disable_animation_background")},null,8,["onChange","modelValue","label"])]),f(y,{onClick:i.logout},{default:V(()=>[U(l(e.$t("logout")),1)]),_:1},8,["onClick"])])):(r(),d("div",B,[t("div",S,[t("div",q,[t("div",A,[t("div",M,[t("h2",N,l(e.$t("login")),1),t("form",{onSubmit:s[3]||(s[3]=L((...n)=>i.login_by_app&&i.login_by_app(...n),["prevent"])),class:"mt-8 space-y-4"},[t("div",null,[t("label",j,l(e.$t("email")),1),t("div",z,[h(t("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>c.email=n),name:"email",type:"text",required:"",class:"w-full text-gray-800 text-sm border border-gray-300 px-4 py-3 rounded-md outline-blue-600",placeholder:e.$t("email")},null,8,D),[[b,c.email,void 0,{lazy:!0}]])])]),t("div",null,[t("label",E,l(e.$t("password")),1),t("div",T,[h(t("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>c.password=n),name:"password",type:"password",required:"",class:"w-full text-gray-800 text-sm border border-gray-300 px-4 py-3 rounded-md outline-blue-600",placeholder:e.$t("password")},null,8,G),[[b,c.password,void 0,{lazy:!0}]])])]),H,t("div",I,[t("button",{type:"submit",onClick:s[2]||(s[2]=(...n)=>i.login_by_app&&i.login_by_app(...n)),class:"w-full py-3 px-4 text-sm tracking-wide rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none"},l(e.$t("login")),1)])],32)])])])])]))])}const O=k(C,[["render",K]]);export{O as default};
