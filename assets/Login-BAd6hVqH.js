import{q as p,u as l,A as h,b as v,K as V,M as L,_ as C,r as d,c as g,a as s,t as a,N as U,k as r,i as u,w,o as m,j as b}from"./index-FnhrnB1c.js";const B={name:"Login",data(){return{animation_backgound:!1,user_name:"",uid:""}},setup(){const e=p(""),t=p("");return{email:e,password:t}},mounted(){const e=l();document.title=this.$t("login"),this.checklogin(),e.isLoggedin&&this.get_user_settings(),console.log("login")},methods:{async checklogin(){const e=l();e.setUserLoggedin(!1);const t=new h(v);try{const o=await t.get();console.log(o),e.setUserLoggedin(!0)}catch{e.setUserLoggedin(!1)}},async get_user_settings(){},async set_user_setting(){l().setAnimation(this.animation_backgound),console.log("setted_animation")},login_by_app(){const e=V.createEmailPasswordSession(this.email,this.password),t=l();e.then(o=>{console.log(o),this.$notify(this.$t("success")),l().setUserLoggedin(!0),console.log(o),t.setuid(o.userId)},o=>{this.$notify(this.$t("login_failure")),console.log(o)})},async logout(){l().setUserLoggedin(!1),await new h(v).deleteSession("current"),console.warn("logout"),L.push("/home")},animation_setting(){}},computed:{isLoggedin(){return l().userLoggedin}}},N={class:""},S={key:0},$={class:"font-[sans-serif]"},A={class:"min-h-screen flex flex-col items-center justify-center px-4"},j={class:"max-w-md w-full"},E={class:"p-8 rounded-2xl dark:bg-slate-700 shadow"},I={class:"text-gray-800 text-center text-2xl font-bold dark:text-white"},M={class:"relative flex items-center"},T={class:"relative flex items-center"},q={class:"!mt-8"},D={key:1,class:"w-1/2 h-full m-auto p-40"},K={class:"ctextfield"},P={class:"ctextfield"};function z(e,t,o,c,_,i){const f=d("v-text-field");d("InputText");const x=d("v-btn"),y=d("v-switch"),k=d("VBtn");return m(),g("div",N,[i.isLoggedin?(m(),g("div",D,[s("h1",K,a(e.$t("Account page")),1),s("h2",P,a(e.$t("welcome"))+" "+a()+" !",1),s("div",null,[u(y,{class:"ctextfield",onChange:i.set_user_setting,modelValue:_.animation_backgound,"onUpdate:modelValue":t[6]||(t[6]=n=>_.animation_backgound=n),label:e.$t("disable_animation_background")},null,8,["onChange","modelValue","label"])]),u(k,{onClick:i.logout},{default:w(()=>[b(a(e.$t("logout")),1)]),_:1},8,["onClick"])])):(m(),g("div",S,[s("div",$,[s("div",A,[s("div",j,[s("div",E,[s("h2",I,a(e.$t("login")),1),s("form",{onSubmit:t[5]||(t[5]=U((...n)=>i.login_by_app&&i.login_by_app(...n),["prevent"])),class:"mt-8 space-y-4"},[s("div",null,[r("",!0),s("div",M,[u(f,{class:"ctextfield",type:"email",modelValue:c.email,"onUpdate:modelValue":t[0]||(t[0]=n=>c.email=n),label:e.$t("email")},null,8,["modelValue","label"]),r("",!0)])]),s("div",null,[r("",!0),s("div",T,[u(f,{class:"ctextfield",type:"password",modelValue:c.password,"onUpdate:modelValue":t[2]||(t[2]=n=>c.password=n),label:e.$t("password")},null,8,["modelValue","label"]),r("",!0)])]),t[7]||(t[7]=s("div",{class:"flex flex-wrap items-center justify-between gap-4"},[s("div",{class:"flex items-center"}),s("div",{class:"text-sm"})],-1)),s("div",q,[u(x,{type:"submit",onClick:i.login_by_app},{default:w(()=>[b(a(e.$t("login")),1)]),_:1},8,["onClick"]),r("",!0)])],32)])])])])]))])}const G=C(B,[["render",z]]);export{G as default};
