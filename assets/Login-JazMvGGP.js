import{k as u,u as c,A as g,b as m,B as f,E as w,_ as y,r as x,c as r,a as e,t as o,G as p,H as h,h as b,w as v,o as d,j as k}from"./index-GiaFg5jJ.js";const L={name:"Login",setup(){const t=u(""),s=u("");return{email:t,password:s}},mounted(){document.title=this.$t("login"),this.checklogin(),console.log("login")},methods:{async checklogin(){const t=c();t.setUserLoggedin(!1);const s=new g(m);try{const n=await s.get();console.log(n),t.setUserLoggedin(!0)}catch{t.setUserLoggedin(!1)}},login_by_app(){f.createEmailSession(this.email,this.password).then(s=>{console.log(s),this.$notify(this.$t("success")),c().setUserLoggedin(!0)},s=>{this.$notify(this.$t("login_failure")),console.log(s)})},async logout(){c().setUserLoggedin(!1),await new g(m).deleteSession("current"),console.warn("logout"),w.push("/home")}},computed:{isLoggedin(){return c().userLoggedin}}},$={class:""},U={key:0},V={class:"font-[sans-serif]"},B={class:"min-h-screen flex flex-col items-center justify-center px-4 bg-white/60"},C={class:"max-w-md w-full"},S={class:"p-8 rounded-2xl shadow"},j={class:"text-gray-800 text-center text-2xl font-bold"},A={class:"mt-8 space-y-4"},E={class:"text-gray-800 text-sm mb-2 block"},N={class:"relative flex items-center"},q=["placeholder"],z={class:"text-gray-800 text-sm mb-2 block"},D={class:"relative flex items-center"},T=["placeholder"],G=e("div",{class:"flex flex-wrap items-center justify-between gap-4"},[e("div",{class:"flex items-center"}),e("div",{class:"text-sm"})],-1),H={class:"!mt-8"},M={key:1,class:"w-1/2 h-full m-auto p-40"};function F(t,s,n,a,I,i){const _=x("VBtn");return d(),r("div",$,[i.isLoggedin?(d(),r("div",M,[e("h1",null,o(t.$t("Account page")),1),b(_,{onClick:i.logout},{default:v(()=>[k(o(t.$t("logout")),1)]),_:1},8,["onClick"])])):(d(),r("div",U,[e("div",V,[e("div",B,[e("div",C,[e("div",S,[e("h2",j,o(t.$t("login")),1),e("form",A,[e("div",null,[e("label",E,o(t.$t("email")),1),e("div",N,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.email=l),name:"email",type:"text",required:"",class:"w-full text-gray-800 text-sm border border-gray-300 px-4 py-3 rounded-md outline-blue-600",placeholder:t.$t("email")},null,8,q),[[h,a.email,void 0,{lazy:!0}]])])]),e("div",null,[e("label",z,o(t.$t("password")),1),e("div",D,[p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>a.password=l),name:"password",type:"password",required:"",class:"w-full text-gray-800 text-sm border border-gray-300 px-4 py-3 rounded-md outline-blue-600",placeholder:t.$t("password")},null,8,T),[[h,a.password,void 0,{lazy:!0}]])])]),G,e("div",H,[e("button",{onClick:s[2]||(s[2]=(...l)=>i.login_by_app&&i.login_by_app(...l)),type:"button",class:"w-full py-3 px-4 text-sm tracking-wide rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none"},o(t.$t("login")),1)])])])])])])]))])}const K=y(L,[["render",F]]);export{K as default};
