import{u as r,D as x,b as d,S as k,d as n,Q as $,_ as y,r as m,c,a,t as h,i as u,w as i,k as v,o as g,j as N}from"./index-FnhrnB1c.js";import{m as p}from"./moment-with-locales-CyYMMKQW.js";const D={name:"Workers",components:{},setup(){},mounted(){const e=r();this.admin=e.userLoggedin,this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("email"),align:"start",key:"email",width:"300px"},{title:this.$t("open_message"),align:"start",key:"edit",width:"300px"}],this.load_messages_base(),this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("date"),sortable:!0,filter:!0},{field:"email",headerName:this.$t("email"),sortable:!0,filter:!0},{field:"edit",headerName:this.$t("open_message"),sortable:!0,filter:!0}]},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],messages:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async load_messages_base(){const e=r();this.workers=[],this.roles=[];const t=new x(d);new k(d),e.language,await(await t.listDocuments(n.website_db,n.mess_coll,[$.orderDesc("$createdAt")])).documents.forEach(async o=>{let s={name:"",contact:"",email:"",date:"",id:""};s.id=o.$id,s.date=o.$createdAt,s.name=o.name,s.email=o.email,this.messages.push(s)}),console.log(this.messages),this.loaded=!0},rt_time(e){return p.locale("hu"),p(e).format("LLL")}},calculated:{}},L={class:"text-gray-600"},S={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},B={class:"flex flex-wrap w-full mb-20"},V={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},C={class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},E={key:0,class:"m-auto w-full"};function T(e,t,f,o,s,_){const b=m("router-link"),w=m("v-data-table");return g(),c("section",L,[a("div",S,[a("div",B,[a("div",V,[a("h1",C,h(e.$t("messages")),1),t[0]||(t[0]=a("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1))])]),e.loaded?(g(),c("div",E,[u(w,{height:"400",headers:e.headers,items:e.messages,"items-per-page":-1},{"item.date":i(({item:l})=>[N(h(_.rt_time(l.date)),1)]),"item.edit":i(({item:l})=>[u(b,{to:"/admin/message/"+l.id},{default:i(()=>t[1]||(t[1]=[a("i",{class:"pi pi-envelope text-5xl"},null,-1)])),_:2},1032,["to"])]),bottom:i(()=>t[2]||(t[2]=[])),_:1},8,["headers","items"])])):v("",!0)])])}const j=y(D,[["render",T]]);export{j as default};
