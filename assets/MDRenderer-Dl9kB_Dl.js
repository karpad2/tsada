import{m as $,p as C,L as N,u as h,A as E,b as g,g as M,D as w,S as T,d as m,Q as v,e as k,_ as q,r as l,c,a as o,t as f,k as u,h as S,w as a,i as _,o as d,j as D}from"./index-DScwbWVd.js";import{A as z}from"./AlbumViewer-BowGX48y.js";import{m as p}from"./moment-with-locales-B7FUwjjv.js";const H={components:{Swiper:$,SwiperSlide:C,AlbumViewer:z,Loading:N},data(){return{chtml:"",gallery:[],title:"",img_cnt:3,loaded:!1,author:"Admin",gallery_id:"",gallery_flag:!1,date:"",newsmode:!1,video_id:"",video_link:"",edumode:!1,admin:!1,not_fotos:!1,headers:[],colDefs:[],documents:[],has_documents:!1,_loading:!0}},mounted(){this.getMD();const i=h();if(this.admin=i.userLoggedin,this.admin){let n=new E(g);console.log(n.client)}this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("open_document"),align:"start",key:"open",width:"300px"}],M.fromTo("#render_title",{opacity:0,x:"150%"},{duration:1.5,opacity:1,x:0})},methods:{async getMD(){const i=new w(g);new T(g);const n=h();let e=await i.listDocuments(m.website_db,m.about_us_db,[v.equal("$id",this.$route.params.id)]);this.has_documents=e.documents[0].has_documents,n.language=="sr"||n.language=="rs"?(this.title=k(e.documents[0].title_rs),this.chtml=e.documents[0].text_rs,document.title=k(e.documents[0].title_rs)):n.language=="hu"?(this.title=e.documents[0].title_hu,this.chtml=e.documents[0].text_hu,document.title=e.documents[0].title_hu):n.language=="en"?(this.title=e.documents[0].title_en,this.chtml=e.documents[0].text_en,document.title=e.documents[0].title_en):console.warn("reading error"),e.documents[0].gallery,console.log(e.documents[0].gallery),this.gallery_flag=e.documents[0].has_gallery,this.has_documents=e.documents[0].has_documents;try{this.gallery_id=e.documents[0].gallery.$id}catch(x){console.log(x)}this.video_id=e.documents[0].video,this.date=e.documents[0].$createdAt,this.video_id==""||this.video_id==null?this.video_link=m.default_video:this.video_link=this.video_id,console.log(this.video_link),this.loaded=!0,this.has_documents&&this.synchronize_documents()},editmode(){this.$router.push("/admin/edit/"+this.$route.params.mode+"/"+this.$route.params.id)},async synchronize_documents(){const i=new w(g);if(this.has_documents){this.doc_loaded=!1,this.documents=[];let e=h().language;await(await i.listDocuments(m.website_db,m.text_documents,[v.equal("texts",[this.$route.params.id])])).documents.forEach(async t=>{let s={name:"",contact:"",img:"",id:"",doc_id:"",date:""};try{s.id=t.$id}catch(y){console.log(y)}e=="en"||e=="hu"?(s.name=t.document_title_hu,s.contact=t.contact):(e=="rs"||e=="sr")&&(s.name=k(t.document_title_rs),s.contact=t.contact),s.id=t.$id,s.doc_id=t.document_id,s.date=t.$createdAt,this.documents.push(s)}),this.doc_loaded=!0}},rt_time(i){let e=h().language;return e=="rs"||e=="sr"?p.locale("sr"):e=="hu"?p.locale("hu"):e=="en"&&p.locale("en"),p(i).format("LL")}}},Q={class:"text-gray-600 min-h-screen"},j={key:0,class:"container px-5 mx-auto backdrop-filter bg-opacity-50 mb-5 dark:bg-slate-500/50 bg-gray-100 backdrop-blur-lg",style:{"min-height":"70vh"}},R={key:0,class:"flex flex-wrap w-full mb-20 p-2 rounded"},W={class:"w-full mb-6 lg:mb-0"},F={id:"render_title",class:"sm:text-3xl p-3 text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},G=o("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),I={class:"mt-3 w-full mb-6 lg:mb-0"},J={class:"sm:text-3xl p-3 text-2xl font-medium title-font mb-2 text-gray-100"},K=o("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1);const O={key:2},P=["innerHTML"],U={key:3},X={key:4},Y={class:"m-auto w-full"},Z=o("i",{class:"pi pi-book text-5xl"},null,-1),ee=o("i",{class:"pi pi-cloud-upload text-5xl"},null,-1);function te(i,n,e,x,t,s){const y=l("video-background"),V=l("VBtn"),A=l("AlbumViewer"),b=l("router-link"),L=l("v-data-table"),B=l("Loading");return d(),c("section",Q,[t.loaded?(d(),c("div",j,[t.video_id==""?(d(),c("div",R,[o("div",W,[o("h1",F,f(t.title),1),G]),u("",!0)])):(d(),S(y,{key:1,src:t.video_link,style:{"min-height":"200px"},class:"flex flex-wrap w-full mb-20 p-2 rounded",overlay:"linear-gradient(45deg,#2a4ae430,#0EA5E950)"},{default:a(()=>[o("div",I,[o("h1",J,f(t.title),1),K]),u("",!0)]),_:1},8,["src"])),t.admin?(d(),c("p",O,[_(V,{onClick:s.editmode},{default:a(()=>[D(f(i.$t("edit")),1)]),_:1},8,["onClick"])])):u("",!0),o("div",{class:"w-full p-5 dark:text-white",innerHTML:t.chtml},null,8,P),t.gallery_flag?(d(),c("div",U,[_(A,{caption:!1,id:t.gallery_id},null,8,["id"])])):u("",!0),t.has_documents?(d(),c("div",X,[o("div",Y,[_(L,{height:"400",headers:t.headers,items:t.documents},{"item.date":a(({item:r})=>[D(f(s.rt_time(r.date)),1)]),"item.open":a(({item:r})=>[_(b,{to:"/document/"+r.doc_id},{default:a(()=>[Z]),_:2},1032,["to"])]),"item.edit":a(({item:r})=>[_(b,{to:"/admin/text-document-editor/"+r.id},{default:a(()=>[ee]),_:2},1032,["to"])]),bottom:a(()=>[]),_:1},8,["headers","items"])])])):u("",!0)])):(d(),S(B,{key:1}))])}const ne=q(H,[["render",te]]);export{ne as default};
