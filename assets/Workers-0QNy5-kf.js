import{u as x,g as $,D as v,b as w,d as r,I as C,S as R,Q as N,e as D,_ as V,r as p,c as k,a as n,t as b,F as B,f as F,h as S,o as g,i as j,w as h,j as L,k as T}from"./index-FzI0VAvM.js";const E={name:"Workers",components:{},setup(){},mounted(){const e=x();this.admin=e.userLoggedin,document.title=this.$t("workers"),$.fromTo("#render_title",{opacity:0,x:"50%"},{duration:1.5,opacity:1,x:0}),this.admin?this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("contactus"),align:"start",key:"contact",width:"300px"},{title:this.$t("photo"),align:"start",key:"img",width:"200px",cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}},{title:this.$t("Edit"),align:"start",key:"edit",width:"300px"}]:this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("contactus"),align:"start",key:"contact",width:"300px"},{title:this.$t("photo"),align:"start",key:"img",cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}}],this.load_workers_base(),this.admin?this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("contact"),sortable:!0,filter:!0},{field:"img",headerName:this.$t("image"),cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}},{field:"edit",headerName:this.$t("edit"),sortable:!0,filter:!0}]:this.colDefs=[{field:"name",headerName:this.$t("name"),sortable:!0,filter:!0},{field:"contact",headerName:this.$t("contact"),sortable:!0,filter:!0},{field:"img",headerName:this.$t("image"),cellRenderer:function(t){return'<img href="'+t.value+'" class="object-cover w-20" />'}}],$.fromTo(".popups",{opacity:0,y:"50%"},{duration:1.5,opacity:1,y:0})},data:()=>({workers:[{img:"https://dummyimage.com/720x400",name:"SUBTITLE",role:"First",contact:"Lorem ipsum dolor sit"}],roles:[],colDefs:[],loaded:!1,headers:[],admin:!1}),methods:{async new_stuff(e){const d=await new v(w).createDocument(r.website_db,r.workers,C.unique(),{roles:e});this.$router.push("/admin/worker/"+d.$id)},async load_workers_base(){const e=x();this.workers=[],this.roles=[];const t=new v(w),d=new R(w);let s=e.language,y=d.getFileView(r.website_images,r.missing_worker_picture).href,u=await t.listDocuments(r.website_db,r.roles_db,[N.orderAsc("listasorrend")]);for(let m=0;m<u.documents.length;m++){let l=u.documents[m],_=[],c=await t.listDocuments(r.website_db,r.workers,[N.equal("roles",[l.$id])]),a="";s=="en"?a=l.role_en:s=="hu"?a=l.role_hu:(s=="rs"||s=="sr")&&(a=D(l.role_rs)),await c.documents.forEach(async i=>{let o={name:"",contact:"",img:"",id:""};o.id=i.$id,s=="en"||s=="hu"?(o.name=i.worker_name_hu,o.contact=i.contact):(s=="rs"||s=="sr")&&(o.name=D(i.worker_name_rs),o.contact=i.contact),i.worker_img==""||i.worker_img==null?o.img=y:o.img=await d.getFileView(r.website_images,i.worker_img).href,_.push(o)});let f={role:"",workers:[],id:""};f.id=l.$id,f.role=a,f.workers=_,this.roles.push(f)}console.log(this.roles),this.loaded=!0},onReady(e){console.log("onReady")}}},I={class:"text-gray-600 min-h-screen"},W={class:"container px-5 py-20 mx-auto bg-slate-100/30 dark:bg-slate-300/30"},q={class:"flex flex-wrap w-full mb-20"},Q={class:"lg:w-1/3 w-full mb-6 lg:mb-0"},A={id:"render_title",class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},U=n("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),z={class:"sm:text-2xl text-sm font-medium mb-3 text-gray-900 dark:text-white"},G=["src"],H=n("i",{class:"pi pi-user-edit text-5xl"},null,-1);function J(e,t,d,s,y,u){const m=p("router-link"),l=p("v-data-table"),_=p("v-btn");return g(),k("section",I,[n("div",W,[n("div",q,[n("div",Q,[n("h1",A,b(e.$t("workers")),1),U])]),e.loaded?(g(!0),k(B,{key:0},F(e.roles,c=>(g(),k("div",{class:"m-auto w-full popups",key:c.role},[n("h1",z,b(c.role),1),j(l,{height:"400",headers:e.headers,items:c.workers},{"item.img":h(({item:a})=>[n("img",{src:a.img,class:"object-cover w-20"},null,8,G)]),"item.edit":h(({item:a})=>[j(m,{to:"/admin/worker/"+a.id},{default:h(()=>[H]),_:2},1032,["to"])]),bottom:h(()=>[]),_:2},1032,["headers","items"]),e.admin?(g(),L(_,{key:0,onClick:a=>u.new_stuff(c.id),class:"m-5"},{default:h(()=>[T(b(e.$t("add_new_worker_in_that_category")),1)]),_:2},1032,["onClick"])):S("",!0)]))),128)):S("",!0)])])}const M=V(E,[["render",J]]);export{M as default};
