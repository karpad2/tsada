import{_ as p,S as x,b as u,y as d,D as g,d as c,Q as b,c as i,a as r,i as y,w as v,U as T,V as k,F as _,f as w,t as o,k as f,o as l,n as D,W as S}from"./index-CAZ1nnMG.js";const M={data(){return{currentTime:"",currentDate:"",currentTemperature:null,currentSlide:0,slides:[],newsItems:[],events:[],slideBackgrounds:["#f87171","#60a5fa","#34d399","#a78bfa","#fbbf24"],storage:null}},created(){this.storage=new x(u)},methods:{async updateTime(){try{const t=await fetch("https://share.tsada.edu.rs/__time__");if(!t.ok)throw new Error("Failed to fetch time");const s=await t.json();this.currentTime=d(s.date).format("HH:mm:ss"),this.currentDate=d(s.date).format("YYYY-MM-DD")}catch(t){console.warn("Falling back to local time due to error:",t),this.currentTime=d().format("HH:mm:ss"),this.currentDate=d().format("YYYY-MM-DD")}},async fetchContent(){const t=new g(u);try{const s=await t.listDocuments(c.website_db,c.tv_slides,[b.orderAsc("sorrend")]);this.slides=[],this.events=[],s.documents.forEach(n=>{const m=n.image?this.getImageUrl(n.image):null;n.type==="slide"?this.slides.push({title:n.title,text:n.text,image:m,order:n.sorrend}):n.type==="event"&&this.events.push({title:n.title,date:d(n.event_date).format("YYYY-MM-DD"),description:n.description,image:m})})}catch(s){console.error("Error fetching content:",s)}},async fetchNewsItems(){const t=new g(u);try{const s=await t.listDocuments(c.website_db,c.tv_slides);this.newsItems=s.documents.map(n=>n.news_text)}catch(s){console.error("Error fetching news:",s)}},async fetchTemperature(){const t=new g(u);try{let s=await t.getDocument(c.website_db,c.general_settings,"temperature");this.currentTemperature=s.setting_data}catch(s){console.error("Error fetching temperature:",s),this.currentTemperature="N/A"}},getImageUrl(t){return this.storage.getFileView(c.website_images,t).toString()}},mounted(){this.fetchContent(),this.fetchNewsItems(),this.fetchTemperature(),this.updateTime(),setInterval(this.updateTime,1e3),setInterval(()=>{this.slides.length>0&&(this.currentSlide=(this.currentSlide+1)%this.slides.length)},15e3),setInterval(this.fetchContent,3e4)}},I={class:"relative h-screen w-full overflow-hidden bg-gray-900 text-white"},H={class:"absolute inset-0 flex justify-center items-center",ref:"slides"},Y={class:"flex flex-wrap items-center justify-center w-full max-w-5xl"},L={key:0,class:"w-full md:w-1/2 p-4"},C=["src"],j=["innerHTML"],E=["innerHTML"],V={class:"absolute bottom-0 w-full bg-gray-800 text-white flex items-center py-6 px-8"},B={class:"flex overflow-hidden whitespace-nowrap animate-marquee space-x-12"},N={class:"ml-auto pr-8 text-3xl"},F={class:"absolute bottom-16 right-8 text-4xl font-bold"},U={class:"absolute top-0 right-0 mt-16 mr-8 w-1/4 bg-gray-800 bg-opacity-70 p-4 rounded-lg shadow-lg"},z={class:"text-4xl font-bold mb-4 text-white"},A={key:0,class:"text-lg text-gray-300"},Q=["src"],q={key:1,class:"w-full h-32 bg-gray-600 flex items-center justify-center text-gray-300 rounded-lg mb-2"},W=["innerHTML"],G={class:"text-gray-400 text-sm"},J=["innerHTML"];function K(t,s,n,m,e,O){return l(),i("div",I,[r("div",H,[y(T,{name:"fade-slide",mode:"out-in"},{default:v(()=>[e.slides.length>0?(l(),i("div",{key:e.currentSlide,class:"flex justify-center items-center w-full h-full px-12",style:D({backgroundColor:e.slideBackgrounds[e.currentSlide%e.slideBackgrounds.length]})},[r("div",Y,[e.slides[e.currentSlide].image?(l(),i("div",L,[r("img",{src:e.slides[e.currentSlide].image,alt:"Slide Image",class:"object-cover w-full h-96 rounded-lg shadow-lg"},null,8,C)])):f("",!0),r("div",{class:S([[e.slides[e.currentSlide].image?"w-full md:w-1/2":"w-full"],"p-4"])},[r("h2",{class:"text-5xl font-extrabold mb-4 animate-fade-in-down text-center",innerHTML:e.slides[e.currentSlide].title},null,8,j),r("p",{class:"text-2xl max-w-3xl animate-fade-in-up text-center",innerHTML:e.slides[e.currentSlide].text},null,8,E)],2)])],4)):f("",!0)]),_:1})],512),r("div",V,[s[0]||(s[0]=r("img",{src:k,alt:"School Logo",class:"h-16 w-auto mr-6"},null,-1)),r("div",B,[(l(!0),i(_,null,w(e.newsItems,(a,h)=>(l(),i("div",{key:h,class:"flex-shrink-0 text-3xl"},o(a),1))),128))]),r("div",N,o(e.currentTemperature?`${e.currentTemperature}Â°C`:t.$t("loading")),1)]),r("div",F,o(e.currentDate)+" - "+o(e.currentTime),1),r("div",U,[r("h3",z,o(t.$t("events")),1),e.events.length===0?(l(),i("div",A,o(t.$t("noevents")),1)):f("",!0),(l(!0),i(_,null,w(e.events,(a,h)=>(l(),i("div",{key:h,class:"mb-4 border-b border-gray-700 pb-4"},[a.image?(l(),i("img",{key:0,src:a.image,alt:"Event Image",class:"w-full h-32 object-cover rounded-lg mb-2"},null,8,Q)):(l(),i("div",q,[r("span",null,o(t.$t("noimage")),1)])),r("h4",{class:"text-2xl font-semibold",innerHTML:a.title},null,8,W),r("p",G,o(a.date),1),r("p",{class:"text-lg",innerHTML:a.description},null,8,J)]))),128))])])}const R=p(M,[["render",K],["__scopeId","data-v-30fcdeea"]]);export{R as default};
