import{m as B,p as C,u as g,A as L,b as f,g as M,D as k,S as E,d as c,Q as v,e as x,_ as N,r as u,c as _,a as o,t as a,k as p,j as T,w as d,i as h,h as w,o as r}from"./index-CZnG6tjm.js";import{A as $}from"./AlbumViewer-DLwKWxtY.js";import{m as b}from"./moment-with-locales-OC4L4a83.js";const q={components:{Swiper:B,SwiperSlide:C,AlbumViewer:$},data(){return{chtml:"",gallery:[],title:"",img_cnt:3,loaded:!1,author:"Admin",gallery_id:"",gallery_flag:!1,date:"",newsmode:!1,video_id:"",video_link:"",edumode:!1,admin:!1,not_fotos:!1,headers:[],colDefs:[],documents:[],has_documents:!1}},mounted(){this.getMD();const n=g();if(this.admin=n.userLoggedin,this.admin){let l=new L(f);console.log(l.client)}this.headers=[{title:this.$t("name"),align:"start",sortable:!1,key:"name",width:"200px"},{title:this.$t("date"),align:"start",key:"date",width:"300px"},{title:this.$t("open_document"),align:"start",key:"open",width:"300px"}],M.fromTo("#render_title",{opacity:0,x:"150%"},{duration:1.5,opacity:1,x:0})},methods:{async getMD(){const n=new k(f),l=new E(f),s=g();let t=await n.listDocuments(c.website_db,c.about_us_db,[v.equal("$id",this.$route.params.id)]);this.has_documents=t.documents[0].has_documents,s.language=="sr"||s.language=="rs"?(this.title=x(t.documents[0].title_rs),this.chtml=t.documents[0].text_rs,document.title=x(t.documents[0].title_rs)):s.language=="hu"?(this.title=t.documents[0].title_hu,this.chtml=t.documents[0].text_hu,document.title=t.documents[0].title_hu):s.language=="en"?(this.title=t.documents[0].title_en,this.chtml=t.documents[0].text_en,document.title=t.documents[0].title_en):console.warn("reading error"),t.documents[0].gallery,console.log(t.documents[0].gallery),this.gallery_flag=t.documents[0].has_gallery,this.has_documents=t.documents[0].has_documents,this.gallery_id=t.documents[0].gallery.$id,this.video_id=t.documents[0].video,this.date=t.documents[0].$createdAt;let e="659d5e6949ae7294f9f1";this.video_id=e,this.video_link=l.getFileView(c.website_images,this.video_id).href,console.log(this.video_link),this.video_link=c.default_video,this.loaded=!0,this.has_documents&&this.synchronize_documents()},editmode(){this.$router.push("/admin/edit/"+this.$route.params.mode+"/"+this.$route.params.id)},async synchronize_documents(){const n=new k(f);if(this.has_documents){this.doc_loaded=!1,this.documents=[];let s=g().language;await(await n.listDocuments(c.website_db,c.text_documents,[v.equal("texts",[this.$route.params.id])])).documents.forEach(async e=>{let i={name:"",contact:"",img:"",id:"",doc_id:"",date:""};i.id=e.$id,s=="en"||s=="hu"?(i.name=e.document_title_hu,i.contact=e.contact):(s=="rs"||s=="sr")&&(i.name=x(e.document_title_rs),i.contact=e.contact),i.id=e.$id,i.doc_id=e.document_id,i.date=e.$createdAt,this.documents.push(i)}),this.doc_loaded=!0}},rt_time(n){let s=g().language;return s=="rs"||s=="sr"?b.locale("sr"):s=="hu"?b.locale("hu"):s=="en"&&b.locale("en"),b(n).format("LL")}}},z={class:"text-gray-600 min-h-screen"},H={class:"container px-5 mx-auto backdrop-filter bg-opacity-50 mb-5 dark:bg-slate-500/50 bg-gray-100 backdrop-blur-lg",style:{"min-height":"70vh"}},Q={key:0,class:"flex flex-wrap w-full mb-20 p-2 rounded"},j={class:"w-full mb-6 lg:mb-0"},F={id:"render_title",class:"sm:text-3xl p-3 text-2xl font-medium title-font mb-2 text-gray-900 dark:text-white"},R=o("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),W={class:"align-bottom ml-3 leading-relaxed text-white"},G={class:"mt-3 w-full mb-6 lg:mb-0"},I={class:"sm:text-3xl p-3 text-2xl font-medium title-font mb-2 text-gray-100"},J=o("div",{class:"h-1 w-20 bg-sky-500/100 rounded"},null,-1),K={class:"align-bottom ml-3 leading-relaxed text-white"},O={key:2},P=["innerHTML"],U={key:3},X={key:4},Y={class:"m-auto w-full"},Z=o("i",{class:"pi pi-book text-5xl"},null,-1),ee=o("i",{class:"pi pi-cloud-upload text-5xl"},null,-1);function te(n,l,s,t,e,i){const S=u("video-background"),A=u("VBtn"),V=u("AlbumViewer"),y=u("router-link"),D=u("v-data-table");return r(),_("section",z,[o("div",H,[e.video_id==""?(r(),_("div",Q,[o("div",j,[o("h1",F,a(e.title),1),R]),o("p",W,[o("strong",null,a(n.$t("date")),1),p(": "+a(i.rt_time(e.date)),1)])])):(r(),T(S,{key:1,src:e.video_link,style:{"min-height":"200px"},class:"flex flex-wrap w-full mb-20 p-2 rounded",overlay:"linear-gradient(45deg,#2a4ae430,#0EA5E950)"},{default:d(()=>[o("div",G,[o("h1",I,a(e.title),1),J]),o("p",K,[o("strong",null,a(n.$t("date")),1),p(": "+a(i.rt_time(e.date)),1)])]),_:1},8,["src"])),e.admin?(r(),_("p",O,[h(A,{onClick:i.editmode},{default:d(()=>[p(a(n.$t("edit")),1)]),_:1},8,["onClick"])])):w("",!0),o("div",{class:"w-full p-5 dark:text-white",innerHTML:e.chtml},null,8,P),e.gallery_flag?(r(),_("div",U,[h(V,{caption:!1,id:e.gallery_id},null,8,["id"])])):w("",!0),e.has_documents?(r(),_("div",X,[o("div",Y,[h(D,{height:"400",headers:e.headers,items:e.documents},{"item.date":d(({item:m})=>[p(a(i.rt_time(m.date)),1)]),"item.open":d(({item:m})=>[h(y,{to:"/document/"+m.doc_id},{default:d(()=>[Z]),_:2},1032,["to"])]),"item.edit":d(({item:m})=>[h(y,{to:"/admin/text-document-editor/"+m.id},{default:d(()=>[ee]),_:2},1032,["to"])]),bottom:d(()=>[]),_:1},8,["headers","items"])])])):w("",!0)])])}const ne=N(q,[["render",te]]);export{ne as default};
