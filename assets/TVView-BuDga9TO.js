import{_ as x,R as m,D as u,b as h,d as o,Q as g,c as a,a as r,i as v,w as y,T as D,F as f,f as b,t as n,k as p,o as c,U as S,V as T,W as k,X as I}from"./index-Dx_Kapxh.js";const Y={data(){return{currentTime:"",currentDate:"",currentTemperature:null,currentSlide:0,slides:[],newsItems:[],events:[],slideBackgrounds:["bg-red-500","bg-blue-500","bg-gradient-to-r from-green-400 to-blue-600","bg-purple-500","bg-gradient-to-r from-yellow-400 to-red-500"]}},methods:{async updateTime(){try{const s=await fetch("https://share.tsada.edu.rs/__time__");if(!s.ok)throw new Error("Failed to fetch time");const t=await s.json();this.currentTime=m(t.date).format("HH:mm:ss"),this.currentDate=m(t.date).format("YYYY-MM-DD")}catch(s){console.warn("Falling back to local time due to error:",s),this.currentTime=m().format("HH:mm:ss"),this.currentDate=m().format("YYYY-MM-DD")}},async fetchSlides(){const s=new u(h);try{const i=(await s.listDocuments(o.website_db,o.tv_slides,[g.orderAsc("sorrend")])).documents.map(d=>({title:d.title,text:d.text,image:d.image,order:d.sorrend}));JSON.stringify(i)!==JSON.stringify(this.slides)&&(this.slides=i,console.log("Slides updated with new content."))}catch(t){console.error("Error fetching slides:",t)}},async fetchNewsItems(){const s=new u(h);try{const t=await s.listDocuments(o.website_db,o.tv_slides);this.newsItems=t.documents.map(i=>i.news_text)}catch(t){console.error("Error fetching news:",t)}},async fetchTemperature(){const s=new u(h);try{let t=await s.getDocument(o.website_db,o.general_settings,"temperature");this.currentTemperature=t.setting_data}catch(t){console.error("Error fetching temperature:",t),this.currentTemperature="N/A"}},async fetchEvents(){const s=new u(h);try{const t=await s.listDocuments(o.website_db,o.events_collection,[g.orderDesc("event_date"),g.limit(5)]);this.events=t.documents.map(i=>({title:i.title,date:m(i.event_date).format("YYYY-MM-DD"),description:i.description,image:i.image}))}catch(t){console.error("Error fetching recent events:",t)}}},mounted(){this.fetchSlides(),this.fetchNewsItems(),this.fetchTemperature(),this.fetchEvents(),this.updateTime(),setInterval(this.updateTime,1e3),setInterval(()=>{this.slides.length>0&&(this.currentSlide=(this.currentSlide+1)%this.slides.length)},15e3),setInterval(this.fetchSlides,3e4)}},w=s=>(T("data-v-27dbb576"),s=s(),k(),s),E={class:"relative h-screen w-full overflow-hidden bg-gray-900 text-white"},N={class:"absolute inset-0",ref:"slides"},B=["src"],M={class:"text-6xl font-extrabold mb-8 animate-fade-in-down"},V={class:"text-3xl animate-fade-in-up max-w-4xl"},j={class:"absolute bottom-0 w-full bg-gray-800 text-white flex items-center py-6 px-8"},C=w(()=>r("img",{src:I,alt:"School Logo",class:"h-16 w-auto mr-6 animate-bounce"},null,-1)),F={class:"flex overflow-hidden whitespace-nowrap animate-marquee space-x-12"},H={class:"ml-auto pr-8 text-3xl animate-pulse"},L={class:"absolute bottom-16 right-8 text-4xl font-bold animate-pulse"},A={class:"absolute top-0 right-0 mt-16 mr-8 w-1/4 bg-gray-800 bg-opacity-70 p-4 rounded-lg shadow-lg"},J=w(()=>r("h3",{class:"text-4xl font-bold mb-4 text-white"},"Recent Events",-1)),O={key:0,class:"text-lg text-gray-300"},Q=["src"],R={class:"text-2xl font-semibold"},q={class:"text-gray-400 text-sm"},z={class:"text-lg"};function U(s,t,i,d,e,W){return c(),a("div",E,[r("div",N,[v(D,{name:"fade-slide",mode:"out-in"},{default:y(()=>[e.slides.length>0?(c(),a("div",{key:e.currentSlide,class:S(["absolute inset-0 flex flex-col justify-center items-center text-center px-12",e.slideBackgrounds[e.currentSlide%e.slideBackgrounds.length],"slide-animation"])},[e.slides[e.currentSlide].image?(c(),a("img",{key:0,src:e.slides[e.currentSlide].image,alt:"Slide Image",class:"w-full h-64 object-cover mb-4 rounded-lg"},null,8,B)):p("",!0),r("h2",M,n(e.slides[e.currentSlide].title),1),r("p",V,n(e.slides[e.currentSlide].text),1)],2)):p("",!0)]),_:1})],512),r("div",j,[C,r("div",F,[(c(!0),a(f,null,b(e.newsItems,(l,_)=>(c(),a("div",{key:_,class:"flex-shrink-0 text-3xl"},n(l),1))),128))]),r("div",H,n(e.currentTemperature?`${e.currentTemperature}Â°C`:"Loading..."),1)]),r("div",L,n(e.currentDate)+" - "+n(e.currentTime),1),r("div",A,[J,e.events.length===0?(c(),a("div",O,"No recent events available.")):p("",!0),(c(!0),a(f,null,b(e.events,(l,_)=>(c(),a("div",{key:_,class:"mb-4 border-b border-gray-700 pb-4"},[r("img",{src:l.image,alt:"Event Image",class:"w-full h-32 object-cover rounded-lg mb-2"},null,8,Q),r("h4",R,n(l.title),1),r("p",q,n(l.date),1),r("p",z,n(l.description),1)]))),128))])])}const G=x(Y,[["render",U],["__scopeId","data-v-27dbb576"]]);export{G as default};
