import{q as f,u as n,A as h,b as v,y as V,M as L,N as C,_ as U,r as d,c as m,a as s,t as l,O as B,k as r,i as u,w,o as g,j as b}from"./index-BfJHO_zn.js";const N={name:"Login",data(){return{animation_backgound:!1,user_name:"",uid:""}},setup(){const e=f(""),t=f("");return{email:e,password:t}},mounted(){const e=n();document.title=this.$t("login"),this.checklogin(),e.isLoggedin&&this.get_user_settings()},methods:{async checklogin(){const e=n();e.setUserLoggedin(!1);const t=new h(v);try{const a=await t.get();V(a),e.setUserLoggedin(!0)}catch{e.setUserLoggedin(!1)}},async get_user_settings(){},async set_user_setting(){n().setAnimation(this.animation_backgound)},login_by_app(){const e=L.createEmailPasswordSession(this.email,this.password),t=n();e.then(a=>{this.$notify(this.$t("success")),n().setUserLoggedin(!0),t.setuid(a.userId)},a=>{this.$notify(this.$t("login_failure"))})},async logout(){n().setUserLoggedin(!1),await new h(v).deleteSession("current"),console.warn("logout"),C.push("/home")},animation_setting(){}},computed:{isLoggedin(){return n().userLoggedin}}},S={class:""},$={key:0},A={class:"font-[sans-serif]"},j={class:"min-h-screen flex flex-col items-center justify-center px-4"},E={class:"max-w-md w-full"},I={class:"p-8 rounded-2xl dark:bg-slate-700 shadow"},M={class:"text-gray-800 text-center text-2xl font-bold dark:text-white"},T={class:"relative flex items-center"},q={class:"relative flex items-center"},D={class:"!mt-8"},O={key:1,class:"w-1/2 h-full m-auto p-40"},P={class:"ctextfield"},z={class:"ctextfield"};function F(e,t,a,c,_,i){const p=d("v-text-field");d("InputText");const y=d("v-btn"),x=d("v-switch"),k=d("VBtn");return g(),m("div",S,[i.isLoggedin?(g(),m("div",O,[s("h1",P,l(e.$t("Account page")),1),s("h2",z,l(e.$t("welcome"))+" "+l()+" !",1),s("div",null,[u(x,{class:"ctextfield",onChange:i.set_user_setting,modelValue:_.animation_backgound,"onUpdate:modelValue":t[6]||(t[6]=o=>_.animation_backgound=o),label:e.$t("disable_animation_background")},null,8,["onChange","modelValue","label"])]),u(k,{onClick:i.logout},{default:w(()=>[b(l(e.$t("logout")),1)]),_:1},8,["onClick"])])):(g(),m("div",$,[s("div",A,[s("div",j,[s("div",E,[s("div",I,[s("h2",M,l(e.$t("login")),1),s("form",{onSubmit:t[5]||(t[5]=B((...o)=>i.login_by_app&&i.login_by_app(...o),["prevent"])),class:"mt-8 space-y-4"},[s("div",null,[r("",!0),s("div",T,[u(p,{class:"ctextfield",type:"email",modelValue:c.email,"onUpdate:modelValue":t[0]||(t[0]=o=>c.email=o),label:e.$t("email")},null,8,["modelValue","label"]),r("",!0)])]),s("div",null,[r("",!0),s("div",q,[u(p,{class:"ctextfield",type:"password",modelValue:c.password,"onUpdate:modelValue":t[2]||(t[2]=o=>c.password=o),label:e.$t("password")},null,8,["modelValue","label"]),r("",!0)])]),t[7]||(t[7]=s("div",{class:"flex flex-wrap items-center justify-between gap-4"},[s("div",{class:"flex items-center"}),s("div",{class:"text-sm"})],-1)),s("div",D,[u(y,{type:"submit",onClick:i.login_by_app},{default:w(()=>[b(l(e.$t("login")),1)]),_:1},8,["onClick"]),r("",!0)])],32)])])])])]))])}const H=U(N,[["render",F]]);export{H as default};
